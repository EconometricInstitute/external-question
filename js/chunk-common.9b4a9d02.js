(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{2200:function(e,t,s){"use strict";s("627b")},2311:function(e,t,s){"use strict";s("f15c")},2428:function(e,t,s){},"24fc":function(e,t,s){"use strict";s.d(t,"d",(function(){return js})),s.d(t,"b",(function(){return Ns})),s.d(t,"c",(function(){return Ms}));var a=s("0798"),n=s("8336"),r=s("132d"),o=s("490a"),i=s("2fa4"),l=s("71a3"),u=s("fe57"),c=s("9a96"),p=s("71d9"),d=s("2a7f"),h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"question-container"},[t("div",{staticClass:"question-main"},[t("div",{staticClass:"flex-grow-1"},[t("BlocklyWorkspace",{ref:"workspace",attrs:{question:e.question,focused:e.focused,inputAnswer:e.inputAnswer,varnames:e.varnames},on:{code:e.codeChange}})],1),t("div",{staticClass:"instructions"},[t("div",{staticClass:"instruction-div scroll-y"},[t("MarkdownDisplay",{staticClass:"instruction-text",attrs:{source:e.question.description}})],1),t(p["a"],{staticClass:"run-bar",attrs:{flat:"",dense:""}},[t(i["a"]),t(d["a"],[e.running?e._e():t(n["a"],{staticClass:"run-toolbar-el",on:{click:function(t){return t.stopPropagation(),e.runTraceCode()}}},[t(r["a"],[e._v("mdi-play")]),e._v(" Test ")],1),e.running?t(n["a"],{staticClass:"run-toolbar-el",on:{click:function(t){return t.stopPropagation(),e.stopTraceCode()}}},[t(r["a"],[e._v("mdi-stop")]),e._v(" Stop ")],1):e._e(),t(n["a"],{staticClass:"run-toolbar-el",attrs:{disabled:e.running||null==e.testCases},on:{click:function(t){return t.stopPropagation(),e.submitCode()}}},[t(r["a"],[e._v("mdi-send")]),e._v(" Run ")],1),e.running?t("div",{staticClass:"running-indicator run-toolbar-el"},[t("div",[t(o["a"],{attrs:{indeterminate:!0}}),t("span",[e._v("Running...")])],1)]):e._e()],1),t(i["a"])],1)],1)]),t("div",{staticClass:"question-io"},[t(u["a"],{staticClass:"question-iotabs",attrs:{"background-color":"secondary",dark:""},model:{value:e.ioTab,callback:function(t){e.ioTab=t},expression:"ioTab"}},[t(c["a"],{attrs:{color:"white"}}),t(l["a"],[e._v("Example")]),t(l["a"],[e._v("Example Result")]),t(l["a"],[e._v("Code")]),t(l["a"],[e._v("Answer")])],1),t("div",{staticClass:"question-iocontent"},[0==e.ioTab?t("div",{staticClass:"iotab"},[t("h4",[e._v("In this tab you can find the input and output for an example testcase")]),t("div",{staticClass:"example"},[t("div",{staticClass:"exampleInput"},[t("h4",[e._v("Example Input")]),t("EnvironmentDisplay",{attrs:{data:e.question.exampleInput}})],1),t("div",{staticClass:"exampleOutput"},[t("h4",[e._v("Example Output")]),t("EnvironmentDisplay",{attrs:{data:e.question.exampleOutput}})],1)])]):e._e(),1==e.ioTab?t("div",{staticClass:"iotab"},[e.traceError?t("div",[t("h4",[e._v("Error while running")]),t(a["a"],{staticClass:"small-alert",attrs:{type:"error"}},[e._v(" The following error occurred while your program was tested: "),t("br"),e._v(" "+e._s(e.traceError)+" ")])],1):e._e(),e.traceOutput?t("div",[e.compareFailed?t(a["a"],{staticClass:"small-alert",attrs:{type:"error"}},[e._v(" One or more output variables do not have the expected outcome for the example test case. "),t("br"),e._v(" This indicates there is a mistake in your program. ")]):e.compareSuccess?t(a["a"],{staticClass:"small-alert",attrs:{type:"info",icon:"mdi-check"}},[e._v(" The output variables have the correct values for the example test case. "),t("br"),e._v(" This does not guarantee your program is correct for all test cases. "),t("br"),e._v(" It is your responsibility to make sure the program is correct for all test cases. ")]):e._e(),t("h4",[e._v("Your program produced the following output:")]),t("EnvironmentDisplay",{attrs:{data:e.traceOutput,reference:e.question.exampleOutput,compare:e.compareResult}})],1):e._e(),e.traceOutput||e.traceError?e._e():t("div",[t("h4",[e._v("This tab will contain the output of your program after you test it.")])])]):e._e(),2==e.ioTab?t("div",{staticClass:"iotab"},[e.code.display?[t("h4",[e._v("This is the generated JavaScript code of your program:")]),t("pre",{staticClass:"code"},[t("code",{staticClass:"code"},[e._v(e._s(e.code.display))])])]:t("h4",[e._v("This tab will contain the Javascript code generated from your program.")])],2):e._e(),3==e.ioTab?t("div",{staticClass:"iotab"},[0==e.testOutput.length?t("span",[e._v("After you run your code, the answer code appears here")]):e._e(),e.outputErrors?t(a["a"],{staticClass:"small-alert",attrs:{type:"error"}},[e._v(" Your program produced an error for at least one testcase. "),t("br"),e._v(" This indicates your program is likely "),t("strong",[e._v("incorrect")]),e._v(". ")]):e.compareFailed?t(a["a"],{staticClass:"small-alert",attrs:{type:"error"}},[e._v(" The example test case is incorrect. "),t("br"),e._v(" This means your answer code is likely "),t("strong",[e._v("incorrect")]),e._v(". ")]):e.outputMissing?t(a["a"],{staticClass:"small-alert",attrs:{type:"warning"}},[e._v(" One of the output variables was missing (undefined) for at least one testcase."),t("br"),e._v(" This indicates your program is likely "),t("strong",[e._v("incorrect")]),e._v(". ")]):e._e(),e.testOutput.length>0?t("AnswerCodeDisplay",{attrs:{answerCode:e.answerCode}}):e._e(),e.testOutput.length>0?[t("div",{ref:"outputs"},[t("h4",[e._v("The answer code is based on the following output of your program.")]),e._m(0),t("ul",e._l(e.outputDisplay,(function(s){return t("li",{key:"test-"+s.index},[t("span",[e._v("With the following inputs:")]),e._l(s.input,(function(a,n){return t("span",{key:"test-input-"+s.index+"-"+n,staticClass:"blockly-inputvalue"},[e._v(" "+e._s(n)+" = "+e._s(JSON.stringify(a))+" ")])})),s.output.error?e._e():t("span",[t("span",[e._v(" your program produced the following outputs:")]),e._l(s.output.data,(function(a,n){return t("span",{key:"test-output-"+s.index+"-"+n,staticClass:"blockly-outputvalue"},[e._v(" "+e._s(n)+" = "+e._s(JSON.stringify(a))+" ")])}))],2),s.output.error?t("span",[t("span",[e._v(" your program produced the following error:")]),t("span",{staticClass:"blockly-outputerror"},[e._v(e._s(s.output.data))])]):e._e()],2)})),0)])]:e._e()],2):e._e()])],1)])},m=[function(){var e=this,t=e._self._c;return t("p",[e._v("It is "),t("strong",[e._v("your responsibility")]),e._v(" to make sure that your output is correct for "),t("strong",[e._v("all testcases")]),e._v(".")])}],f=(s("14d9"),s("22a9")),v=s("4f0f"),b=s("2db4"),y=s("8654"),g=function(){var e=this,t=e._self._c;return t("div",[t("h4",[e._v("The following answer code was computed. Click "),t(r["a"],{on:{click:e.copyAnswerCode}},[e._v("mdi-content-copy")]),e._v(" to copy it to the clipboard")],1),t(y["a"],{staticClass:"answercode-box",attrs:{readonly:"",solo:"",dense:"",value:e.answerCode},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[t(r["a"],{on:{click:e.copyAnswerCode}},[e._v("mdi-content-copy")])]},proxy:!0}])}),t(b["a"],{attrs:{centered:""},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(n["a"],e._b({attrs:{color:"primary",text:""},on:{click:function(t){e.copyBar=!1}}},"v-btn",s,!1),[e._v(" OK ")])]}}]),model:{value:e.copyBar,callback:function(t){e.copyBar=t},expression:"copyBar"}},[e._v(" The answer code was copied to the clipboard ")])],1)},_=[],k=s("3c2e"),w={props:["answerCode"],data:()=>({copyBar:!1}),methods:{copyAnswerCode(){Object(k["b"])(this.answerCode),this.copyBar=!0}}},C=w,x=s("2877"),T=Object(x["a"])(C,g,_,!1,null,"fb7860b2",null),S=T.exports,O=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.hasFocus,expression:"hasFocus"}],staticClass:"blockly",attrs:{id:e.divId}})},q=[],E=s("54ca"),A=s("fc06");const R="\n.blocklyToolboxDiv {background: rgba(0, 0, 0, 0.05);}.blocklyMainBackground {stroke:none !important;}.blocklyTreeLabel, .blocklyText, .blocklyHtmlInput {font-family:'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace !important;}.blocklyText { font-size:1rem !important;}.rtl .blocklyText {text-align:right;} .blocklyTreeLabel { font-size:1.25rem !important;} .blocklyCheckbox {fill: #ff3030 !important;text-shadow: 0px 0px 6px #f00;font-size: 17pt !important;}";function $(e,t="returnOutput"){let s=t+"({\n";for(const a of Object.keys(e))s+=a+",\n";return s+="})",s}function D(e){let t="";for(const s of Object.keys(e))t+="let "+s+" = ",t+=JSON.stringify(e[s]),t+=";\n";return t}function j(e){e.highlightBlock("");const t=document.getElementById("blockly-renderer-style-geras-classic").innerText+document.getElementById("blockly-common-style").innerText+R,s=e.svgBlockCanvas_.cloneNode(!0);s.removeAttribute("transform");const a=document.getElementsByClassName("blocklyBlockCanvas")[0],n=a.getBBox(),r=(new XMLSerializer).serializeToString(s),o=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${n.width}" height="${n.height}" viewBox="${n.x} ${n.y} ${n.width} ${n.height}">\n        <rect width="100%" height="100%" fill="white"></rect>\n        ${r}</svg>\n    `;return{svg:o,style:t}}const N="\nonmessage = function(msg) {\n    const payload = msg.data;\n    const script = payload.script;\n    const id = payload.id;\n    try {\n        const f = new Function(script);\n        const data = f();\n        postMessage(JSON.stringify({error: false, id, data}));\n    }\n    catch(err) {\n        postMessage(JSON.stringify({error: true, id, data: ''+err}));\n    }\n};\n",M=URL.createObjectURL(new Blob([N],{type:"text/javascript"}));async function L(e){const t=new Worker(M),s=new Array(e.length),a=new Array(e.length),n=new Array(e.length);for(let o=0;o<e.length;o++){const e=new Promise(e=>{n[o]=e});a[o]=e}t.onmessage=e=>{const t=JSON.parse(e.data);s[t.id]=t,n[t.id]()};let r=0;for(const o of e)t.postMessage({script:o,id:r++});return new Promise(e=>{Promise.all(a).then(()=>{t.terminate(),e(s)})})}async function U(e){const t=new Worker(M),s=new Promise((e,s)=>{t.onmessage=a=>{a.error?s(a.data):e(a.data),t.terminate()}});return t.postMessage({script:e,id:0}),s}const I="\nfunction highlightBlock(block) {\n  postMessage({type: 'highlight', block});\n}\nfunction runFinished(result) {\n  postMessage({type: 'finish', result});\n}\nfunction runError(err) {\n  postMessage({type: 'error', error: err});\n}\nasync function sleep(ms) {\n  await new Promise(r => setTimeout(r, ms));;\n}\n";function F(e,t,s,a){const n=I+"$step_count=0;\nasync function run() {\ntry {\n"+e+"}\ncatch (err) {\n   runError(err);\n}};\nrun();",r=URL.createObjectURL(new Blob([n],{type:"text/javascript"})),o=new Worker(r);return o.onmessage=e=>{const n=e.data.type;"highlight"==n?t(e.data.block):"finish"==n?(s(e.data.result),o.terminate()):"error"==n&&(a(e.data.error),o.terminate())},o}function P(e,t=0,s=!1){if("number"==typeof e)return e.toFixed(t);if(!s&&"string"==typeof e){var a=e.toLowerCase();return a=a.replace(/\s+/g,""),a=a.replace(/"/g,""),a}if(Array.isArray(e)){for(var n=[],r=0;r<e.length;r++)n.push(P(e[r]));return"["+n.join(",")+"]"}return e}function B(e,t,s,a,n,r){const o=E["Xml"].workspaceToDom(e),i=E["Xml"].domToText(o),{svg:l,style:u}=j(e);var c='<!doctype html>\n<html><head><meta charset="utf8" />';return c+="<style>"+u+"</style>",c+="</head><body>\n",c+='<div>\n<h3>Blockly Program used to generate answerCode "'+t+'"</h3>\n',c+=l,c+="</div>",(n||r)&&(c+="\n<div><h3>Problems</h3>\n<ul>\n",n&&(c+="<li>The output for the example testcase is incorrect</li>\n"),r&&(c+="<li>The outputs contain <em>undefined</em> values.</li>\n"),c+="</ul>\n</div>"),c+="\n<div id='answer-log'>",c+=s,c+='</div><div style="display: none">\n',c+=E["Xml"].domToText(E["Xml"].workspaceToDom(e)),c+="\n</div>\n",c+="<div>\n<h3>Blockly Generated Javascript Code</h3>\n<pre><code>\n",c+=new Option(a).innerHTML,c+="\n</code></pre>\n</div>\n",c+='\n<div>\n<h3>Raw Blockly Workspace</h3>\n<textarea cols="100" rows="10" readonly="true">\n',c+=new Option(i).innerHTML,c+="\n</textarea>\n</div>\n",c+="</body>\n</html>",c}s("4b03");var V=s("2f62");const J=5e4,z=150;var W={name:"BlocklyWorkspace",props:["question","focused","inputAnswer","varnames"],mounted(){if(this.workspace=E["inject"](this.divId,{toolbox:this.question.toolbox,sounds:!1,media:"."}),this.inputAnswer&&this.inputAnswer.xml){const e=E["Xml"].textToDom(this.inputAnswer.xml);E["Xml"].domToWorkspace(e,this.workspace)}this.workspace.addChangeListener(this.workspaceChanged),this.updateVarnames()},data:()=>({workspace:null,workspaceXML:"",displayCode:"",testingCode:"",tracingCode:"",runningTrace:!1,traceWorker:null}),methods:{workspaceChanged(){this.$nextTick(()=>{const e=E["Xml"].workspaceToDom(this.workspace),t=E["Xml"].domToText(e),s={display:this.getDisplayCode(),trace:this.getTracingCode(),test:this.getTestingCode(),svg:this.getSVG(),xml:t};this.$emit("code",s)})},getTestingCode(){A["javascriptGenerator"].STATEMENT_PREFIX="if ($step_count++ > "+this.maxSteps+') throw "Too many steps. Check for infinite loops.";';let e=A["javascriptGenerator"].workspaceToCode(this.workspace);return e="var $step_count = 0;"+e,A["javascriptGenerator"].STATEMENT_PREFIX="",e},getDisplayCode(){let e=A["javascriptGenerator"].workspaceToCode(this.workspace);return this.preCode+e},getTracingCode(){A["javascriptGenerator"].STATEMENT_PREFIX="await sleep("+z+");if ($step_count++ > "+this.maxSteps+') throw "Too many steps. Check for infinite loops.";highlightBlock(%1);\n';let e=A["javascriptGenerator"].workspaceToCode(this.workspace);return e=e.substring(e.indexOf("\n")+1).trim()+"\n",e=e.replace(/\s+function\s+/g,"\nasync function "),A["javascriptGenerator"].STATEMENT_PREFIX="",this.preCode+e+"\nhighlightBlock('');\n"+$(this.question.exampleOutput,"runFinished")},getSVG(){return j(this.workspace)},highlight(e){this.workspace.highlightBlock(e)},clearTrace(){this.workspace.highlightBlock("")},updateVarnames(){if(this.workspace&&this.varnames&&0==this.workspace.getAllBlocks().length){const e=new Set(this.workspace.getAllVariableNames());for(const t of this.varnames)e.has(t)||(this.workspace.createVariable(t),e.add(t))}},getWorkspace(){return this.workspace}},computed:{...Object(V["c"])(["hasFocus"]),maxSteps(){return this.question.maxSteps?this.question.maxSteps:J},divId(){return"blocklyDiv-"+this.question.uuid},preCode(){let e="/*Defining input variables*/\n";return e+=D(this.question.exampleInput),e+="\n",e+="/*Code generated from blocks*/\n",e}},watch:{focused(){this.$nextTick(()=>{E["svgResize"](this.workspace),E["resizeContents"](this.workspace),this.workspace.resize(),this.workspace.resizeContents()})},varnames(){this.updateVarnames()}}},X=W,Y=(s("b495"),Object(x["a"])(X,O,q,!1,null,"ec159108",null)),H=Y.exports,Q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"displayEnv"},[e.data?t("ul",e._l(Object.entries(e.data),(function([s,a]){return t("li",{key:s},[t("div",{staticClass:"variable"},[e.compare?[e.compare[s]?t(r["a"],{attrs:{color:"success"}},[e._v("mdi-check")]):t(r["a"],{attrs:{color:"error"}},[e._v("mdi-alert-circle")])]:e._e(),e._v(" A variable with name "),t("code",{staticClass:"varname"},[e._v(e._s(s))]),e._v(" which holds "),t("ValueDisplay",{attrs:{data:a}}),e.compare&&!e.compare[s]?[e._v(" but for which the expected value is "),t("ValueDisplay",{attrs:{data:e.reference[s]}})]:e._e()],2)])})),0):e._e()])},G=[],K=function(){var e=this,t=e._self._c;return t("span",{staticClass:"value-display"},[void 0===e.data||null===e.data?[t("span",{staticClass:"missing-value"},[e._v("no value")])]:"string"==typeof e.data?[e._v(' the string "'),t("span",{staticClass:"string-value"},[e._v(e._s(e.data))]),e._v('" ')]:"number"==typeof e.data?[e._v(" the number "),t("span",{staticClass:"number-value"},[e._v(e._s(e.data))])]:"boolean"==typeof e.data?[e._v(" the boolean "),t("span",{staticClass:"boolean-value"},[e._v(e._s(e.data))])]:Array.isArray(e.data)?[e._v(" the list "),t("table",{staticClass:"array-value"},[t("tr",[t("th",{staticClass:"array-value-header",attrs:{scope:"row"}},[e._v("Position")]),e._l(e.data,(function(s,a){return t("td",{key:"pos-"+a,staticClass:"array-value-index"},[e._v(" "+e._s(a)+" ")])}))],2),t("tr",[t("th",{staticClass:"array-value-header",attrs:{scope:"row"}},[e._v("Value")]),e._l(e.data,(function(e,s){return t("td",{key:"value-"+s,staticClass:"array-value-entry"},[t("ValueDisplay",{attrs:{data:e}})],1)}))],2)])]:"function"==typeof e.data?[e._v(" a function ")]:[e._v(" an object "),t("table",{staticClass:"object-value"},[t("tr",[t("th",{staticClass:"object-value-header",attrs:{scope:"row"}},[e._v("Property")]),e._l(Object.keys(e.data),(function(s){return t("td",{key:"prop-"+s,staticClass:"object-value-key"},[e._v(" "+e._s(s)+" ")])}))],2),t("tr",[t("th",{staticClass:"object-value-header",attrs:{scope:"row"}},[e._v("Value")]),e._l(Object.entries(e.data),(function([e,s]){return t("td",{key:"value-"+e,staticClass:"object-value-entry"},[t("ValueDisplay",{attrs:{data:s}})],1)}))],2)])]],2)},Z=[],ee={name:"ValueDisplay",props:["data"],components:{ValueDisplay:void 0}},te=ee,se=(s("4acc"),Object(x["a"])(te,K,Z,!1,null,"7292e807",null)),ae=se.exports,ne={name:"EnvironmentDisplay",props:["data","reference","compare"],components:{ValueDisplay:ae}},re=ne,oe=(s("c922"),Object(x["a"])(re,Q,G,!1,null,"5bf86fad",null)),ie=oe.exports;function le(e,t,s,a=!1){if(e&&!t||!e&&t)return!1;if(null==e&&null==t)return!0;if(void 0==e&&void 0==t)return!0;if(void 0==e||null==e||null==t||void 0==t)return!1;if(a)if("number"==typeof e&&"string"==typeof t)try{t=parseFloat(t)}catch{return!1}else if("string"==typeof e&&"number"==typeof t)try{e=parseFloat(e)}catch{return!1}if(typeof e!=typeof t)return!1;if(Array.isArray(e)!=Array.isArray(t))return!1;if("string"==typeof e||"boolean"==typeof e)return e==t;if("number"==typeof e)return e.toFixed(s)==t.toFixed(s);if(Array.isArray(e)){if(e.length!=t.length)return!1;for(const[s,a]of e.entries())if(!le(a,t[s]))return!1;return!0}if(Object.keys(e).length!=Object.keys(t).length)return!1;for(const[n,r]of Object.entries(e)){if(!(n in t))return!1;if(!le(r,t[n],s,a))return!1}for(const n in t)if(!(n in e))return!1;return!0}var ue={name:"BlocklyQuestion",props:["question","focused","inputAnswer"],components:{MarkdownDisplay:v["a"],AnswerCodeDisplay:S,BlocklyWorkspace:H,EnvironmentDisplay:ie},data:()=>({ioTab:null,code:{},testOutput:[],dirty:!0,worker:null,traceOutput:null,traceError:null,testCases:null}),created(){this.inputAnswer&&(this.dirty=this.inputAnswer.dirty,this.testOutput=this.inputAnswer.output),this.question&&this.refreshTestcases()},methods:{codeChange(e){this.code=e},runTraceCode(e){if(!this.worker){this.traceOutput=null,this.traceError=null,this.ioTab=2;const t=(e?this.getTestCode():this.code.trace)||"";if(t)if(e)U(t).then(e=>{const t=JSON.parse(e);t.error?this.traceError=t.data:this.traceOutput=t.data});else{const e=this.$refs.workspace.highlight,s=this.finishTrace,a=this.errorTrace;this.worker=F(t,e,s,a)}else this.traceOutput=null,this.traceError="Can not run an empty program",this.ioTab=1}},stopTraceCode(){this.worker&&(this.worker.terminate(),this.worker=null)},finishTrace(e){this.traceOutput=e,this.ioTab=1,this.stopTraceCode()},errorTrace(e){this.traceError=e,this.ioTab=1,this.stopTraceCode()},getTestCode(e=this.question.exampleInput,t,s){const a=this.code.test||"";t||(t=a.substring(a.indexOf("\n")+1).trim()+"\n"),s||(s=a.substring(0,a.indexOf("\n")).trim()+"\n\n");let n=Object.entries(e).map(([e,t])=>e+"="+JSON.stringify(t)).join(";\n")+";\n";return n+=s,n+=t,n+=this.outputCode,n},submitCode(){this.testOutput=[],this.runTraceCode(!0),this.dirty=!0;const e=this.code.test||"",t=e.substring(e.indexOf("\n")+1).trim()+"\n",s=e.substring(0,e.indexOf("\n")).trim()+"\n\n",a=[];for(const n of this.testCases){const e=this.getTestCode(n,t,s);a.push(e)}L(a).then(e=>{this.testOutput=e,this.dirty=!1,this.ioTab=3})},refreshTestcases(){const e=this.question.testCaseScript+";return getTestCases();";U(e).then(e=>{const t=JSON.parse(e);!t.error&&Array.isArray(t.data)?t.data.length>0&&le(t.data[0],this.question.exampleInput,1e-6)?this.testCases=t.data:this.testCases=[this.question.exampleInput,...t.data]:console.log("Error while generating testCases: "+t.data)})},generateFile(){const e=this.$refs.workspace.getWorkspace(),t=this.$refs.outputs?this.$refs.outputs.innerHTML:"";return B(e,this.answerCode,t,this.code.display,this.compareFailed,this.outputMissing)}},computed:{outputOrder(){const e=[];for(const t of Object.keys(this.question.exampleOutput))e.push(t);return e.sort(),e},outputCode(){let e="const $resultObj = {};\n";for(const t of Object.keys(this.question.exampleOutput))e+="$resultObj."+t+" = "+t+";\n";return e+="return $resultObj;",e},outputDisplay(){const e=[];if(!this.testCases||!this.testOutput||0==this.testOutput.length)return e;for(let t=0;t<this.testCases.length;t++){let s={error:!0,data:"Program was not executed"};if(t in this.testOutput){s=this.testOutput[t];for(const e of this.outputOrder)s.data[e]&&(s.data[e]=P(s.data[e],this.decimals,this.question.strictStrings))}e.push({index:t,input:this.testCases[t],output:s})}return e},outputErrors(){if(this.testOutput)for(const e of this.testOutput)if(e.error)return!0;return!1},outputMissing(){if(this.testOutput)for(const e of this.testOutput)if(!e.error)for(const t of this.outputOrder)if("undefined"==typeof e.data[t])return!0;return!1},answerCode(){const e=[];for(const a of this.outputDisplay)for(const t of this.outputOrder)e.push(t+"="+a.output.data[t]);const t=e.join("|");let s=f(t);if(this.question.hashReps&&this.question.hashReps>1)for(let a=1;a<this.question.hashReps;a++)s=f(s+"|"+t);return this.question.hashLength&&(s=s.substring(0,this.question.hashLength)),this.question.hashPrefix&&(s=this.question.hashPrefix+s),s},fullAnswer(){return{dirty:this.dirty,shortAnswer:this.answerCode,xml:this.code.xml,svg:this.code.svg,output:this.testOutput}},running(){return null!=this.worker},decimals(){return void 0!==this.question.decimals?this.question.decimals:1},varnames(){if(this.question){const{exampleInput:e,exampleOutput:t}=this.question;return[...Object.keys(e),...Object.keys(t)]}return[]},compareResult(){if(this.traceOutput){const e={};for(const[t,s]of Object.entries(this.question.exampleOutput))e[t]=le(s,this.traceOutput[t],this.decimals);return e}return null},compareFailed(){return!!(this.compareResult&&Object.keys(this.compareResult).length>0)&&Object.values(this.compareResult).some(e=>!e)},compareSuccess(){return!!(this.compareResult&&Object.keys(this.compareResult).length>0)&&Object.values(this.compareResult).every(e=>e)}},watch:{fullAnswer(){this.$emit("input",this.fullAnswer)},question(){this.refreshTestcases()}}},ce=ue,pe=(s("eb9e"),s("a508"),Object(x["a"])(ce,h,m,!1,null,"469f06b8",null)),de=pe.exports,he=s("ac7c"),me=s("62ad"),fe=s("a523"),ve=s("4bd4"),be=s("0fd9"),ye=s("ba0d"),ge=function(){var e=this,t=e._self._c;return t(ve["a"],{attrs:{model:"valid"}},[t(fe["a"],[t(be["a"],[t(me["a"],{staticClass:"editPanel",attrs:{cols:"6"}},[t("h4",[e._v("Example Input")]),e.inputError?t(a["a"],{attrs:{type:"error"}},[e._v("Unable to parse JSON. Question not updated. Fix this!"),t("br"),e._v(e._s(e.inputError))]):t(a["a"],{attrs:{type:"success"}},[e._v("JSON succesfully parsed")]),t("codemirror",{ref:"editor1",staticClass:"small-editor",attrs:{value:e.exampleInputStr,options:e.jsonOptions},on:{input:e.updateInput}})],1),t(me["a"],{staticClass:"editPanel",attrs:{cols:"6"}},[t("h4",[e._v("Example Goal")]),e.outputError?t(a["a"],{attrs:{type:"error"}},[e._v("Unabled to parse JSON. Question not updated. Fix this!"),t("br"),e._v(e._s(e.outputError))]):t(a["a"],{attrs:{type:"success"}},[e._v("JSON succesfully parsed")]),t("codemirror",{ref:"editor2",staticClass:"small-editor",attrs:{value:e.exampleOutputStr,options:e.jsonOptions},on:{input:e.updateOutput}})],1)],1),t(be["a"],[t(me["a"],{staticClass:"editPanel",attrs:{cols:"6"}},[t("h4",[e._v("Testcase Script")]),t("codemirror",{ref:"editor3",staticClass:"editor",attrs:{value:e.value.testCaseScript,options:e.jsOptions},on:{input:e.updateTestCases}})],1),t(me["a"],{staticClass:"editPanel",attrs:{cols:"6"}},[t("h4",[e._v("Toolbox XML")]),t("codemirror",{ref:"editor4",staticClass:"editor",attrs:{value:e.value.toolbox,options:e.xmlOptions},on:{input:e.updateToolbox}})],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"6"}},[t("h4",[e._v("Answer code settings")]),t(ye["a"],{attrs:{min:"0",step:"1",max:"8",ticks:"","thumb-label":"",label:"Number of decimals to compare in numbers "+e.value.decimals},model:{value:e.value.decimals,callback:function(t){e.$set(e.value,"decimals",e._n(t))},expression:"value.decimals"}}),t(he["a"],{attrs:{label:"Perform strict comparison of strings (correct spacing and case are required)"},model:{value:e.value.strictString,callback:function(t){e.$set(e.value,"strictString",t)},expression:"value.strictString"}}),t(y["a"],{staticClass:"short-field",attrs:{label:"Answer code prefix"},on:{input:e.updateHashLength},model:{value:e.value.hashPrefix,callback:function(t){e.$set(e.value,"hashPrefix",t)},expression:"value.hashPrefix"}}),t(y["a"],{staticClass:"short-field",attrs:{label:"Answer code repetitions",min:"1",type:"number"},on:{input:e.updateHashReps},model:{value:e.value.hashReps,callback:function(t){e.$set(e.value,"hashReps",t)},expression:"value.hashReps"}}),t(y["a"],{staticClass:"short-field",attrs:{label:"Answer code length",min:"1",type:"number"},on:{input:e.updateHashLength},model:{value:e.value.hashLength,callback:function(t){e.$set(e.value,"hashLength",t)},expression:"value.hashLength"}})],1)],1)],1)],1)},_e=[],ke=s("8f94"),we=(s("a7be"),s("f9d4"),s("d5e0"),{name:"EditBlocklyQuestion",props:["value","focused"],components:{codemirror:ke["codemirror"]},data:()=>({inputError:null,outputError:null,loaded:!1,exampleInputStr:null,exampleOutputStr:null,updating:!1,jsonOptions:{tabSize:4,mode:"application/json",lineNumbers:!0,line:!0,lineWrapping:!0},xmlOptions:{tabSize:4,mode:"application/xml",lineNumbers:!0,line:!0,lineWrapping:!0},jsOptions:{tabSize:4,mode:"application/javascript",lineNumbers:!0,line:!0,lineWrapping:!0}}),created(){this.loaded=!0,this.exampleInputStr=JSON.stringify(this.value.exampleInput,null,"\t"),this.exampleOutputStr=JSON.stringify(this.value.exampleOutput,null,"\t")},methods:{valueChanged(){this.$emit("input",this.value)},updateInput(e){this.inputError=null;try{this.value.exampleInput=JSON.parse(e),this.updating=!0,this.$nextTick(()=>{this.updating=!1}),this.$emit("input",this.value)}catch(t){this.inputError=t.message}},updateOutput(e){this.outputError=null;try{this.value.exampleOutput=JSON.parse(e),this.updating=!0,this.$nextTick(()=>{this.updating=!1}),this.$emit("input",this.value)}catch(t){this.outputError=t.message}},stringifyIO(){this.updating||(this.value.exampleInput&&(this.exampleInputStr=JSON.stringify(this.value.exampleInput,null,3)),this.value.exampleOutput&&(this.exampleOutputStr=JSON.stringify(this.value.exampleOutput,null,3)))},updateTestCases(e){this.value.testCaseScript=e,this.$emit("input",this.value)},updateToolbox(e){this.value.toolbox=e,this.$emit("input",this.value)},updateHashReps(e){this.value.hashReps=e,this.$emit("input",this.value)},updateHashLength(e){this.value.hashLength=e,this.$emit("input",this.value)},updateHashPrefix(e){this.value.hashPrefix=e,this.$emit("input",this.value)},refreshAll(){this.$refs.editor1.refresh(),this.$refs.editor2.refresh(),this.$refs.editor3.refresh(),this.$refs.editor4.refresh()}},watch:{focused(){this.$nextTick(this.refreshAll)},value:{deep:!0,handler(){this.stringifyIO()}}}}),Ce=we,xe=(s("a925"),Object(x["a"])(Ce,ge,_e,!1,null,"4d638db0",null)),Te=xe.exports;function Se(e){return{...e,exampleInput:{cost:8},exampleOutput:{output:4},toolbox:'<xml id="toolbox" style="display: none">\n    <category id="catLogic" colour="210" name="Logic">\n      <block type="controls_if"></block>\n      <block type="logic_compare"></block>\n      <block type="logic_operation"></block>\n      <block type="logic_negate"></block>\n      <block type="logic_boolean"></block>\n      <block type="logic_null"></block>\n      <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n      <block type="controls_repeat_ext">\n        <value name="TIMES">\n          <shadow type="math_number">\n            <field name="NUM">10</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="controls_whileUntil"></block>\n      <block type="controls_for">\n        <value name="FROM">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <value name="TO">\n          <shadow type="math_number">\n            <field name="NUM">10</field>\n          </shadow>\n        </value>\n        <value name="BY">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="controls_forEach"></block>\n      <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n      <block type="math_number"></block>\n      <block type="math_arithmetic">\n        <value name="A">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="math_single">\n        <value name="NUM">\n          <shadow type="math_number">\n            <field name="NUM">9</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="math_trig">\n        <value name="NUM">\n          <shadow type="math_number">\n            <field name="NUM">45</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="math_constant"></block>\n      <block type="math_number_property">\n        <value name="NUMBER_TO_CHECK">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="math_change">\n        <value name="DELTA">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="math_round">\n        <value name="NUM">\n          <shadow type="math_number">\n            <field name="NUM">3.1</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="math_modulo">\n        <value name="DIVIDEND">\n          <shadow type="math_number">\n            <field name="NUM">64</field>\n          </shadow>\n        </value>\n        <value name="DIVISOR">\n          <shadow type="math_number">\n            <field name="NUM">10</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="math_constrain">\n        <value name="VALUE">\n          <shadow type="math_number">\n            <field name="NUM">50</field>\n          </shadow>\n        </value>\n        <value name="LOW">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <value name="HIGH">\n          <shadow type="math_number">\n            <field name="NUM">100</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="math_random_int">\n        <value name="FROM">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <value name="TO">\n          <shadow type="math_number">\n            <field name="NUM">100</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n      <block type="text"></block>\n      <block type="text_join"></block>\n      <block type="text_append">\n        <value name="TEXT">\n          <shadow type="text"></shadow>\n        </value>\n      </block>\n      <block type="text_length">\n        <value name="VALUE">\n          <shadow type="text">\n            <field name="TEXT">abc</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="text_isEmpty">\n        <value name="VALUE">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>\n      <block type="text_indexOf">\n        <value name="VALUE">\n          <block type="variables_get">\n            <field name="VAR">text</field>\n          </block>\n        </value>\n        <value name="FIND">\n          <shadow type="text">\n            <field name="TEXT">abc</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="text_charAt">\n        <value name="VALUE">\n          <block type="variables_get">\n            <field name="VAR">text</field>\n          </block>\n        </value>\n      </block>\n      <block type="text_getSubstring">\n        <value name="STRING">\n          <block type="variables_get">\n            <field name="VAR">text</field>\n          </block>\n        </value>\n      </block>\n      <block type="text_changeCase">\n        <value name="TEXT">\n          <shadow type="text">\n            <field name="TEXT">abc</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="text_trim">\n        <value name="TEXT">\n          <shadow type="text">\n            <field name="TEXT">abc</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="text_print">\n        <value name="TEXT">\n          <shadow type="text">\n            <field name="TEXT">abc</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="text_prompt_ext">\n        <value name="TEXT">\n          <shadow type="text">\n            <field name="TEXT">abc</field>\n          </shadow>\n        </value>\n      </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n      <block type="lists_create_with">\n        <mutation items="0"></mutation>\n      </block>\n      <block type="lists_create_with"></block>\n      <block type="lists_repeat">\n        <value name="NUM">\n          <shadow type="math_number">\n            <field name="NUM">5</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="lists_length"></block>\n      <block type="lists_isEmpty"></block>\n      <block type="lists_getIndex">\n        <value name="VALUE">\n          <block type="variables_get">\n            <field name="VAR">list</field>\n          </block>\n        </value>\n      </block>\n      <block type="lists_setIndex">\n        <value name="LIST">\n          <block type="variables_get">\n            <field name="VAR">list</field>\n          </block>\n        </value>\n      </block>\n      <block type="lists_getSublist">\n        <value name="LIST">\n          <block type="variables_get">\n            <field name="VAR">list</field>\n          </block>\n        </value>\n      </block>\n      <block type="lists_split">\n        <value name="DELIM">\n          <shadow type="text">\n            <field name="TEXT">,</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n      <block type="colour_picker"></block>\n      <block type="colour_random"></block>\n      <block type="colour_rgb">\n        <value name="RED">\n          <shadow type="math_number">\n            <field name="NUM">100</field>\n          </shadow>\n        </value>\n        <value name="GREEN">\n          <shadow type="math_number">\n            <field name="NUM">50</field>\n          </shadow>\n        </value>\n        <value name="BLUE">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>\n      <block type="colour_blend">\n        <value name="COLOUR1">\n          <shadow type="colour_picker">\n            <field name="COLOUR">#ff0000</field>\n          </shadow>\n        </value>\n        <value name="COLOUR2">\n          <shadow type="colour_picker">\n            <field name="COLOUR">#3333ff</field>\n          </shadow>\n        </value>\n        <value name="RATIO">\n          <shadow type="math_number">\n            <field name="NUM">0.5</field>\n          </shadow>\n        </value>\n      </block>\n    </category>\n    <sep></sep>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n  </xml>',testCaseScript:"function getTestCases() {\n        const cases = [];\n        for (let i=-20; i <= 20; i+=2) {\n           cases.push({cost: i});\n        }\n        return cases;\n}",decimals:1,strictStrings:!1,hashReps:1,hashLength:10,hashPrefix:"x"}}function Oe(e,t,s){return new Promise((t,a)=>{try{const a=e.exportConfig;if("file"==a.type){const e=s.generateFile();t({type:"file",filename:a.filename,contentType:"text",content:e})}}catch(n){a(n)}})}var qe={description:"Visual programming exercise based on the Google Blockly toolkit",view:de,edit:Te,initialize:Se,exportAnswer:Oe,defaultExtension:".html"},Ee=function(){var e=this,t=e._self._c;return t("div",{staticClass:"question-container"},[t("div",{staticClass:"question-editor"},[t("MonacoEditor",{ref:"editor",staticClass:"editor",attrs:{language:e.question.lang,options:e.editorOptions},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),t("div",{staticClass:"rhs"},[t("div",{staticClass:"question-instruction"},[t("MarkdownDisplay",{staticClass:"question-text",attrs:{source:e.question.description}})],1),t("div",{staticClass:"question-toolbar"},[e.question.runUrl&&!e.perusal?t(n["a"],{on:{click:function(t){return t.stopPropagation(),e.$refs.runDialog.openRunDialog()}}},[t(r["a"],[e._v("mdi-play")]),e._v(" Run ")],1):e._e(),e.perusal?e._e():t(n["a"],{on:{click:function(t){return t.stopPropagation(),e.$refs.resetDialog.show()}}},[t(r["a"],[e._v("mdi-replay")]),e._v(" Reset ")],1),e.question.referenceUrl?t(n["a"],{attrs:{href:e.question.referenceUrl,target:"_blank"}},[t(r["a"],[e._v("mdi-book-open")]),e._v(" References ")],1):e._e()],1)]),t("EditorRunDialog",{ref:"runDialog",attrs:{code:e.code,question:e.question}}),t("ConfirmDialog",{ref:"resetDialog",attrs:{title:"Reset your code",type:"warning",text:"This will delete your current work on this question and reset the code to the default. Use CTRL+Z to undo your last edits.",confirm:()=>this.code=this.question.defaultAnswer,width:"60em"}})],1)},Ae=[],Re=s("059c"),$e=s("b0af"),De=s("99d9"),je=s("169a"),Ne=s("ce7e"),Me=s("67b6"),Le=s("43a6"),Ue=s("7e85"),Ie=s("9c54"),Fe=s("56a4"),Pe=s("c671"),Be=s("a844"),Ve=function(){var e=this,t=e._self._c;return t(je["a"],{attrs:{width:"80em",scrollable:"",persistent:""},model:{value:e.runDialog,callback:function(t){e.runDialog=t},expression:"runDialog"}},[t($e["a"],[t(De["c"],{staticClass:"headline",attrs:{"primary-title":""}},[e._v(" Run your code ")]),t(De["b"],[t(Ue["a"],{model:{value:e.runStep,callback:function(t){e.runStep=t},expression:"runStep"}},[t(Ie["a"],[t(Fe["a"],{attrs:{step:"1"}},[e._v("Choose input type")]),t(Ne["a"]),t(Fe["a"],{attrs:{step:"2"}},[e._v("Define program input")]),t(Ne["a"]),t(Fe["a"],{attrs:{step:"3"}},[e._v("Compiling and Running Your Program")]),t(Ne["a"]),t(Fe["a"],{attrs:{step:"4"}},[e._v("Result and Output")])],1)],1),t("br"),t(fe["a"],[1==e.runStep?t("div",[e.question.allowCustomTest&&e.question.testCases.length>0?t("div",[t("div",[e._v("Select the kind of input that will be send to your program during execution:")]),t("br"),t(Le["a"],{model:{value:e.performCustom,callback:function(t){e.performCustom=t},expression:"performCustom"}},[t(Me["a"],{attrs:{label:"Select a predefined test case",value:!1}}),t(Me["a"],{attrs:{label:"Define your own input in a textfield",value:!0}})],1)],1):e.question.allowCustomTest?t("div",[e._v(" Your program can only be executed with custom input. ")]):e.question.testCases.length>0?t("div",[e._v(" Your program can only be executed with predefined testcases. ")]):t("div",[e._v(" This question does not allow you to define any input. ")])]):e._e(),2==e.runStep?t("div",[e.runPredefined?t("div",[t("div",[e._v("Select the standard input that will be send to your program during execution:")]),t("br"),t(u["a"],{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[e._l(e.question.testCases.length,(function(s){return t(l["a"],{key:"tab-"+s},[e._v("Testcase "+e._s(s))])})),e._l(e.question.testCases.length,(function(s){return t(Pe["a"],{key:"tab-item-"+s},[t("div",[e._v("Your code will be executed with the following input")]),t("br"),t("code",{staticClass:"pre-output"},[t("pre",[e._v(e._s(e.question.testCases[s-1]))])])])}))],2)],1):e.runCustom?t("div",[t("div",[e._v("Provide the standard input that will be send to your program during execution:")]),t("br"),t(Be["a"],{staticClass:"input-textarea",attrs:{placeholder:"Type your input here",rows:5},model:{value:e.customInput,callback:function(t){e.customInput=t},expression:"customInput"}})],1):t("div",[e._v(" Your program will be executed without any input. ")])]):e._e(),3==e.runStep?t("div",[t("div",[e._v("Compiling and running your program")]),t(o["a"],{attrs:{indeterminate:""}}),e.timeoutPopup?t(a["a"],{attrs:{type:"warning"}},[e._v(" This seems to take rather long. Try restarting the run action, and if the problem persists contact support. ")]):e._e()],1):e._e(),4==e.runStep?t("div",[e.runError?t("div",[t(a["a"],{attrs:{type:"error"}},[e._v(" An unexpected error occurred while running your code. "),t("br"),e._v(" "+e._s(e.runError.name)+" : "+e._s(e.runError.message)+". "),t("br"),e._v(" Try again and contact support if the problem persists. ")])],1):e.emptyResponse?t("div",[t(a["a"],{attrs:{type:"error"}},[e._v(" The result of the execution was empty. "),t("br"),e._v(" This should not happen. "),t("br"),e._v(" Try again and if the problem persists, contact support. ")])],1):e.output.compile?t("div",[0!=e.output.compile.exitCode?t(a["a"],{attrs:{type:"error"}},[e._v(" Your code did not compile succesfully. Please review the following error output. ")]):e.output.compile.stdOut.length?t(a["a"],{attrs:{type:"warning"}},[e._v(" Your code compiled succesfully, but there were warnings. Please review them. ")]):t(a["a"],{attrs:{type:"info"}},[e._v(" Your code compiled succesfully. ")]),t("div",[e.output.compile.stdOut?t("code",{staticClass:"pre-output"},[t("pre",[e._v(e._s(e.output.compile.stdOut))])]):e._e()])],1):e._e(),e.output.run?t("div",[e.output.run.timeout?t(a["a"],{attrs:{type:"error"}},[e._v(" Your program exceeded the time limit of "+e._s(e.output.run.timeLimit)+" seconds. Make sure there are no infinite loops in your code. ")]):0!=e.output.run.exitCode||e.output.run.stdErr?t(a["a"],{attrs:{type:"warning"}},[e._v(" Your program finished execution, but did not exit normally. Review the error output if available. ")]):t(a["a"],{attrs:{type:"success"}},[e._v(" Your program finished exectution normally. ")]),e.output.run.stdErr?t("div",[e._v(" The following errors were reported while running your code: "),t("code",{staticClass:"pre-output"},[t("pre",[e._v(e._s(e.output.run.stdErr))])]),t(Ne["a"])],1):e._e(),t("div",[e._v("The output of your code was as follows:")]),t("code",{staticClass:"pre-output"},[t("pre",[e._v(e._s(e.output.run.stdOut))])])],1):e._e()]):e._e()])],1),t(Ne["a"]),t(De["a"],[t(i["a"]),1==e.runStep?t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.next()}}},[e._v("Next")]):e._e(),3==e.runStep?t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.cancel(!0)}}},[e._v("Restart")]):e._e(),3==e.runStep?t(n["a"],{attrs:{color:"error"},on:{click:function(t){return e.cancel(!1)}}},[e._v("Cancel")]):e._e(),4==e.runStep?t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.openRunDialog()}}},[e._v("Restart")]):e._e(),2==e.runStep?t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.run()}}},[e._v("Run")]):e._e(),2==e.runStep?t(n["a"],{attrs:{color:"error"},on:{click:function(t){return e.back()}}},[e._v("Back")]):e._e(),t(n["a"],{attrs:{disabled:e.running,color:"secondary"},on:{click:function(t){e.runDialog=!1}}},[e._v("Close")])],1)],1)],1)},Je=[],ze=s("cee4");const We=15e3;var Xe={name:"EditorRunDialog",props:["question","code"],data:()=>({runDialog:!1,runStep:1,runError:null,currentTab:0,running:!1,output:"",customInput:"",emptyResponse:!1,performCustom:!1,cancelToken:null,timeout:null,timeoutPopup:!1,currentId:0}),methods:{post:function(e){return ze["a"].post(this.question.runUrl,JSON.stringify(e))},openRunDialog(){this.runError=null,this.output="",this.runStep=1,this.running=!1,this.runDialog=!0,this.cancelToken=null,this.stopTimeout(),this.currentId++},back(){this.runStep-=1},next(){this.runStep+=1},stopTimeout(){this.timeoutPopup=!1,this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},triggerTimeout(){this.timeoutPopup=!0},runSuccesful(e,t){this.currentId==t&&(this.emptyResponse=0===Object.keys(e).length&&e.constructor===Object,this.running=!1,this.output=e,this.runStep=4),this.stopTimeout()},runWithError(e,t){this.currentId==t&&(this.running=!1,this.runStep=4,this.runError=e)},run(){this.runStep=3,this.running=!0,this.output="";let e={mainClass:this.question.mainClass,sources:[{filename:this.question.filename,content:this.code}],stdIn:this.getInput(),token:this.question.runToken};const t=this.currentId;this.post(e).then(e=>{this.runSuccesful(e.data,t)}).catch(e=>{this.runWithError(e,t)}),this.timeout=setTimeout(this.triggerTimeout,We)},cancel(e){this.stopTimeout(),this.cancelToken&&(this.cancelToken.cancel("The request was cancelled by the user"),this.cancelToken=null),e?this.openRunDialog():this.runDialog=!1},getInput(){return this.question.allowCustomTest||0!=this.question.testCases.length?this.runCustom?this.customInput:this.question.testCases[this.currentTab]:""}},computed:{runCustom(){return this.question.allowCustomTest&&(0==this.question.testCases.length||this.performCustom)},runPredefined(){return this.question.testCases.length>0&&(!this.question.allowCustomTest||!this.performCustom)}}},Ye=Xe,He=(s("2311"),Object(x["a"])(Ye,Ve,Je,!1,null,"18a98f9e",null)),Qe=He.exports,Ge=s("84a8"),Ke={name:"CodingQuestion",props:["question","focused","inputAnswer"],components:{MonacoEditor:Re["a"],MarkdownDisplay:v["a"],EditorRunDialog:Qe,ConfirmDialog:Ge["a"]},methods:{resize(){const e=this.$refs.editor.getEditor();e.layout({width:0,height:0}),e.layout()}},watch:{code(e,t){e!=t&&this.$emit("input",e)},focused(e){e&&this.resize()},perusal(e){this.editorOptions.readOnly=e}},created(){this.inputAnswer?this.code=this.inputAnswer:this.question.defaultCode?this.code=this.question.defaultCode:this.question.defaultAnswer&&(this.code=this.question.defaultAnswer),window.addEventListener("resize",this.resize)},destroyed(){window.removeEventListener("resize",this.resize)},data:()=>({code:"",editorOptionsBase:{scrollBeyondLastLine:!1,minimap:{enabled:!1}}}),computed:{editorOptions(){return{...this.editorOptionsBase,readOnly:this.perusal}},...Object(V["c"])(["perusal"])}},Ze=Ke,et=(s("29b0"),s("7870"),Object(x["a"])(Ze,Ee,Ae,!1,null,"1ed96f2e",null)),tt=et.exports,st=s("b974"),at=s("e0c7"),nt=function(){var e=this,t=e._self._c;return t(ve["a"],{attrs:{model:"valid"}},[t(fe["a"],[t(be["a"],[t(me["a"],{attrs:{cols:"6"}},[t(st["a"],{attrs:{label:"Language",items:e.languages,required:""},on:{input:e.valueChanged},model:{value:e.value.lang,callback:function(t){e.$set(e.value,"lang",t)},expression:"value.lang"}})],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"6"}},[t(y["a"],{attrs:{label:"Filename",required:""},on:{input:e.valueChanged},model:{value:e.value.filename,callback:function(t){e.$set(e.value,"filename",t)},expression:"value.filename"}})],1),t(me["a"],{attrs:{cols:"6"}},[t(y["a"],{attrs:{label:"Reference URL"},on:{input:e.valueChanged},model:{value:e.value.referenceUrl,callback:function(t){e.$set(e.value,"referenceUrl",t)},expression:"value.referenceUrl"}})],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"12"}},[t(Be["a"],{attrs:{rows:"6",label:"Default answer",required:""},on:{input:e.valueChanged},model:{value:e.value.defaultAnswer,callback:function(t){e.$set(e.value,"defaultAnswer",t)},expression:"value.defaultAnswer"}})],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"12"}},[t(at["a"],[e._v("Runtime Configuration")]),t(Ne["a"])],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"6"}},[t(y["a"],{attrs:{label:"Runner URL"},on:{input:e.valueChanged},model:{value:e.value.runUrl,callback:function(t){e.$set(e.value,"runUrl",t)},expression:"value.runUrl"}})],1),t(me["a"],{attrs:{cols:"6"}},[t(y["a"],{attrs:{label:"Runner Token"},on:{input:e.valueChanged},model:{value:e.value.runToken,callback:function(t){e.$set(e.value,"runToken",t)},expression:"value.runToken"}})],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"6"}},[t(Be["a"],{attrs:{rows:"6",label:"Testcases (as json)",value:e.testCasesString,required:""},on:{input:e.updateTestCases}})],1),t(me["a"],{attrs:{cols:"6"}},[t(y["a"],{attrs:{label:"Main class",required:""},on:{input:e.valueChanged},model:{value:e.value.mainClass,callback:function(t){e.$set(e.value,"mainClass",t)},expression:"value.mainClass"}}),t("br"),t(st["a"],{attrs:{label:"Allow custom test?",items:[!0,!1]},on:{input:e.valueChanged},model:{value:e.value.allowCustomTest,callback:function(t){e.$set(e.value,"allowCustomTest",t)},expression:"value.allowCustomTest"}})],1)],1)],1)],1)},rt=[];const ot=["c","cpp","csharp","css","html","java","javascript","julia","kotlin","markdown","pascal","python","r","ruby","rust","scala","sql","typescript","xml"];var it={name:"EditCodingQuestion",props:["value","focused"],data:()=>({languages:ot}),methods:{valueChanged(){this.$emit("input",this.value)},updateTestCases(e){try{this.value.testCases=JSON.parse(e),this.$emit("input",this.value)}catch(t){}}},computed:{testCasesString(){return JSON.stringify(this.value.testCases)}}},lt=it,ut=(s("2f4a"),s("9251"),Object(x["a"])(lt,nt,rt,!1,null,"14c73b06",null)),ct=ut.exports;function pt(e){return{...e,lang:"java",filename:"Main.java",mainClass:"Main",defaultAnswer:"import java.util.Scanner;\n\npublic class Main {\n\n\tpublic static void main(String [] args) {\n\n\t}\n}\n",runUrl:"",runToken:"",testCases:[],allowCustomTest:!0,referenceUrl:"https://docs.oracle.com/javase/8/docs/api/index.html"}}function dt(e,t){return new Promise((s,a)=>{try{const a=e.exportConfig;"file"==a.type&&s({type:"file",filename:a.filename,contentType:"text",content:t})}catch(n){a(n)}})}var ht={description:"Single file coding exercise with the Monaco Editor",view:tt,edit:ct,initialize:pt,exportAnswer:dt,defaultExtension:".java"},mt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"question-container"},[t("div",{staticClass:"question-editor"},[t(u["a"],{staticClass:"question-tabs",model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},e._l(e.question.files,(function(s,a){return t(l["a"],{key:"file-"+a,staticClass:"question-tab"},[e._v(" "+e._s(s.filename)+" "),s.readOnly?t(r["a"],{attrs:{dense:""}},[e._v("mdi-lock-outline")]):e._e()],1)})),1),e._l(e.question.files,(function(s,a){return t("MonacoEditor",{directives:[{name:"show",rawName:"v-show",value:e.currentTab==a,expression:"currentTab == index"}],key:"file-editor"+a,ref:"editor",refInFor:!0,staticClass:"editor",attrs:{language:e.question.lang,options:e.editorOptions[a]},on:{change:e.codeChanged},model:{value:e.code[s.filename],callback:function(t){e.$set(e.code,s.filename,t)},expression:"code[file.filename]"}})}))],2),t("div",{staticClass:"rhs"},[t("div",{staticClass:"question-instruction"},[t("MarkdownDisplay",{staticClass:"question-text",attrs:{source:e.question.description}})],1),t("div",{staticClass:"question-toolbar"},[e.question.runUrl?t(n["a"],{on:{click:function(t){return t.stopPropagation(),e.$refs.runDialog.openRunDialog()}}},[t(r["a"],[e._v("mdi-play")]),e._v(" Run ")],1):e._e(),e.perusal?e._e():t(n["a"],{on:{click:function(t){return t.stopPropagation(),e.$refs.resetDialog.show()}}},[t(r["a"],[e._v("mdi-replay")]),e._v(" Reset ")],1),e.question.referenceUrl?t(n["a"],{attrs:{href:e.question.referenceUrl,target:"_blank"}},[t(r["a"],[e._v("mdi-book-open")]),e._v(" References ")],1):e._e()],1)]),t("EditorMultiRunDialog",{ref:"runDialog",attrs:{code:e.code,question:e.question}}),t("ConfirmDialog",{ref:"resetDialog",attrs:{title:"Reset your code",type:"warning",text:"This will delete your current work on (one or all files of) this question and reset the code to the default. Use CTRL+Z if you only want to undo your last edits.",buttons:e.resetButtons,width:"60em"}})],1)},ft=[],vt=function(){var e=this,t=e._self._c;return t(je["a"],{attrs:{width:"80em",scrollable:"",persistent:""},model:{value:e.runDialog,callback:function(t){e.runDialog=t},expression:"runDialog"}},[t($e["a"],[t(De["c"],{staticClass:"headline",attrs:{"primary-title":""}},[e._v(" Run your code ")]),t(De["b"],[t(Ue["a"],{model:{value:e.runStep,callback:function(t){e.runStep=t},expression:"runStep"}},[t(Ie["a"],[t(Fe["a"],{attrs:{step:"1"}},[e._v("Choose input type")]),t(Ne["a"]),t(Fe["a"],{attrs:{step:"2"}},[e._v("Define program input")]),t(Ne["a"]),t(Fe["a"],{attrs:{step:"3"}},[e._v("Compiling and Running Your Program")]),t(Ne["a"]),t(Fe["a"],{attrs:{step:"4"}},[e._v("Result and Output")])],1)],1),t("br"),t(fe["a"],[1==e.runStep?t("div",[e.question.allowCustomTest&&e.question.testCases.length>0?t("div",[t("div",[e._v("Select the kind of input that will be send to your program during execution:")]),t("br"),t(Le["a"],{model:{value:e.performCustom,callback:function(t){e.performCustom=t},expression:"performCustom"}},[t(Me["a"],{attrs:{label:"Select a predefined test case",value:!1}}),t(Me["a"],{attrs:{label:"Define your own input in a textfield",value:!0}})],1)],1):e.question.allowCustomTest?t("div",[e._v(" Your program can only be executed with custom input. ")]):e.question.testCases.length>0?t("div",[e._v(" Your program can only be executed with predefined testcases. ")]):t("div",[e._v(" This question does not allow you to define any input. ")])]):e._e(),2==e.runStep?t("div",[e.runPredefined?t("div",[t("div",[e._v("Select the standard input that will be send to your program during execution:")]),t("br"),t(u["a"],{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[e._l(e.question.testCases.length,(function(s){return t(l["a"],{key:"tab-"+s},[e._v("Testcase "+e._s(s))])})),e._l(e.question.testCases.length,(function(s){return t(Pe["a"],{key:"tab-item-"+s},[t("div",[e._v("Your code will be executed with the following input")]),t("br"),t("code",{staticClass:"pre-output"},[t("pre",[e._v(e._s(e.question.testCases[s-1]))])])])}))],2)],1):e.runCustom?t("div",[t("div",[e._v("Provide the standard input that will be send to your program during execution:")]),t("br"),t(Be["a"],{staticClass:"input-textarea",attrs:{placeholder:"Type your input here",rows:5},model:{value:e.customInput,callback:function(t){e.customInput=t},expression:"customInput"}})],1):t("div",[e._v(" Your program will be executed without any input. ")])]):e._e(),3==e.runStep?t("div",[t("div",[e._v("Compiling and running your program")]),t(o["a"],{attrs:{indeterminate:""}}),e.timeoutPopup?t(a["a"],{attrs:{type:"warning"}},[e._v(" This seems to take rather long. Try restarting the run action, and if the problem persists contact support. ")]):e._e()],1):e._e(),4==e.runStep?t("div",[e.runError?t("div",[t(a["a"],{attrs:{type:"error"}},[e._v(" An unexpected error occurred while running your code. "),t("br"),e._v(" "+e._s(e.runError.name)+" : "+e._s(e.runError.message)+". "),t("br"),e._v(" Try again and contact support if the problem persists. ")])],1):e.emptyResponse?t("div",[t(a["a"],{attrs:{type:"error"}},[e._v(" The result of the execution was empty. "),t("br"),e._v(" This should not happen. "),t("br"),e._v(" Try again and if the problem persists, contact support. ")])],1):e.output.compile?t("div",[0!=e.output.compile.exitCode?t(a["a"],{attrs:{type:"error"}},[e._v(" Your code did not compile succesfully. Please review the following error output. ")]):e.output.compile.stdOut.length?t(a["a"],{attrs:{type:"warning"}},[e._v(" Your code compiled succesfully, but there were warnings. Please review them. ")]):t(a["a"],{attrs:{type:"info"}},[e._v(" Your code compiled succesfully. ")]),t("div",[e.output.compile.stdOut?t("code",{staticClass:"pre-output"},[t("pre",[e._v(e._s(e.output.compile.stdOut))])]):e._e()])],1):e._e(),e.output.run?t("div",[e.output.run.timeout?t(a["a"],{attrs:{type:"error"}},[e._v(" Your program exceeded the time limit of "+e._s(e.output.run.timeLimit)+" seconds. Make sure there are no infinite loops in your code. ")]):0!=e.output.run.exitCode||e.output.run.stdErr?t(a["a"],{attrs:{type:"warning"}},[e._v(" Your program finished execution, but did not exit normally. Review the error output if available. ")]):t(a["a"],{attrs:{type:"success"}},[e._v(" Your program finished exectution normally. ")]),e.output.run.stdErr?t("div",[e._v(" The following errors were reported while running your code: "),t("code",{staticClass:"pre-output"},[t("pre",[e._v(e._s(e.output.run.stdErr))])]),t(Ne["a"])],1):e._e(),t("div",[e._v("The output of your code was as follows:")]),t("code",{staticClass:"pre-output"},[t("pre",[e._v(e._s(e.output.run.stdOut))])])],1):e._e()]):e._e()])],1),t(Ne["a"]),t(De["a"],[t(i["a"]),1==e.runStep?t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.next()}}},[e._v("Next")]):e._e(),3==e.runStep?t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.cancel(!0)}}},[e._v("Restart")]):e._e(),3==e.runStep?t(n["a"],{attrs:{color:"error"},on:{click:function(t){return e.cancel(!1)}}},[e._v("Cancel")]):e._e(),4==e.runStep?t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.openRunDialog()}}},[e._v("Restart")]):e._e(),2==e.runStep?t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.run()}}},[e._v("Run")]):e._e(),2==e.runStep?t(n["a"],{attrs:{color:"error"},on:{click:function(t){return e.back()}}},[e._v("Back")]):e._e(),t(n["a"],{attrs:{disabled:e.running,color:"secondary"},on:{click:function(t){e.runDialog=!1}}},[e._v("Close")])],1)],1)],1)},bt=[];const yt=15e3;var gt={name:"EditorMultiRunDialog",props:["question","code"],data:()=>({runDialog:!1,runStep:1,runError:null,currentTab:0,running:!1,output:"",customInput:"",emptyResponse:!1,performCustom:!1,cancelToken:null,timeout:null,timeoutPopup:!1,currentId:0}),methods:{post:function(e){return ze["a"].post(this.question.runUrl,JSON.stringify(e))},openRunDialog(){this.runError=null,this.output="",this.runStep=1,this.runDialog=!0,this.cancelToken=null,this.stopTimeout(),this.currentId++,this.running=!1},next(){this.runStep+=1},back(){this.runStep-=1},stopTimeout(){this.timeoutPopup=!1,this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},triggerTimeout(){this.timeoutPopup=!0},runSuccesful(e,t){this.currentId==t&&(this.emptyResponse=0===Object.keys(e).length&&e.constructor===Object,this.running=!1,this.output=e,this.runStep=4),this.stopTimeout()},runWithError(e,t){this.currentId==t&&(this.running=!1,this.runStep=4,this.runError=e)},run(){this.runStep=3,this.running=!0,this.output="",console.log(this.question.files),console.log(this.code);let e={mainClass:this.question.mainClass,sources:this.question.files.map(e=>({filename:e.filename,content:this.code[e.filename]})),stdIn:this.getInput(),token:this.question.runToken};const t=this.currentId;this.post(e).then(e=>{this.runSuccesful(e.data,t)}).catch(e=>{this.runWithError(e,t)}),this.timeout=setTimeout(this.triggerTimeout,yt)},cancel(e){this.stopTimeout(),this.cancelToken&&(this.cancelToken.cancel("The request was cancelled by the user"),this.cancelToken=null),e?this.openRunDialog():this.runDialog=!1},getInput(){return this.question.allowCustomTest||0!=this.question.testCases.length?this.runCustom?this.customInput:this.question.testCases[this.currentTab]:""}},computed:{runCustom(){return this.question.allowCustomTest&&(0==this.question.testCases.length||this.performCustom)},runPredefined(){return this.question.testCases.length>0&&(!this.question.allowCustomTest||!this.performCustom)}}},_t=gt,kt=(s("2200"),Object(x["a"])(_t,vt,bt,!1,null,"161e8d97",null)),wt=kt.exports,Ct={name:"MultiCodingQuestion",props:["question","focused","inputAnswer"],components:{MonacoEditor:Re["a"],MarkdownDisplay:v["a"],EditorMultiRunDialog:wt,ConfirmDialog:Ge["a"]},methods:{resize(){const e=this.$refs.editor[this.currentTab].getEditor();e.layout({width:0,height:0}),e.layout()},codeChanged(){this.$emit("input",{...this.code})},reset(e){if(e){const e=this.question.files[this.currentTab];this.$set(this.code,e.filename,e.content)}else this.question.files.forEach(e=>this.$set(this.code,e.filename,e.content))}},watch:{focused(e){e&&this.resize()},currentTab(){this.$nextTick(this.resize)}},created(){if(this.inputAnswer)this.code=this.inputAnswer;else{const e={};for(let t of this.question.files)e[t.filename]=t.content;this.code=e}window.addEventListener("resize",this.resize)},destroyed(){window.removeEventListener("resize",this.resize)},data:()=>({currentTab:0,code:[],editorOptionsBase:{scrollBeyondLastLine:!1,minimap:{enabled:!1}}}),computed:{editorOptions(){return this.question.files.map(e=>({...this.editorOptionsBase,readOnly:this.perusal||e.readOnly}))},resetButtons(){return[{label:"Yes (Current File Only)",action:()=>this.reset(!0),color:"primary"},{label:"Yes (All Files)",action:()=>this.reset(),color:"primary"}]},...Object(V["c"])(["perusal"])}},xt=Ct,Tt=(s("9416"),s("ad93"),Object(x["a"])(xt,mt,ft,!1,null,"e23e5894",null)),St=Tt.exports,Ot=s("b73d"),qt=function(){var e=this,t=e._self._c;return t(ve["a"],{attrs:{model:"valid"}},[t(fe["a"],[t(be["a"],[t(me["a"],{attrs:{cols:"6"}},[t(st["a"],{attrs:{label:"Language",items:e.languages,required:""},on:{input:e.valueChanged},model:{value:e.value.lang,callback:function(t){e.$set(e.value,"lang",t)},expression:"value.lang"}})],1)],1),t(be["a"],{attrs:{cols:"12"}},[t(me["a"],{attrs:{cols:"12"}},[t(at["a"],[e._v("Files")]),t(Ne["a"])],1)],1),t(be["a"],e._l(e.value.files,(function(s,a){return t(me["a"],{key:"file-"+a},[t($e["a"],{staticStyle:{"min-width":"35em"}},[t(De["b"],[t(y["a"],{attrs:{label:"Filename",required:""},on:{input:e.valueChanged},model:{value:s.filename,callback:function(t){e.$set(s,"filename",t)},expression:"file.filename"}}),t(Be["a"],{attrs:{label:"Default contents",required:""},on:{input:e.valueChanged},model:{value:s.content,callback:function(t){e.$set(s,"content",t)},expression:"file.content"}})],1),t(De["a"],[t(n["a"],{attrs:{color:"error"},on:{click:function(t){return e.removeFile(a)}}},[t(r["a"],[e._v("mdi-delete")]),e._v(" Delete File")],1),t(Ot["a"],{staticStyle:{"margin-left":"1em"},attrs:{inset:"",dense:"","append-icon":s.readOnly?"mdi-lock-outline":"mdi-pencil",label:s.readOnly?"Read-Only":"Editable"},model:{value:s.readOnly,callback:function(t){e.$set(s,"readOnly",t)},expression:"file.readOnly"}})],1)],1)],1)})),1),t(me["a"],{attrs:{cols:"6"}},[t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.addFile()}}},[e._v("Add File")])],1),t(be["a"],{attrs:{cols:"12"}},[t(me["a"],{attrs:{cols:"12"}},[t(at["a"],[e._v("Documentation")]),t(Ne["a"])],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"6"}},[t(y["a"],{attrs:{label:"Reference URL"},on:{input:e.valueChanged},model:{value:e.value.referenceUrl,callback:function(t){e.$set(e.value,"referenceUrl",t)},expression:"value.referenceUrl"}})],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"12"}},[t(at["a"],[e._v("Runtime Configuration")]),t(Ne["a"])],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"6"}},[t(y["a"],{attrs:{label:"Runner URL"},on:{input:e.valueChanged},model:{value:e.value.runUrl,callback:function(t){e.$set(e.value,"runUrl",t)},expression:"value.runUrl"}})],1),t(me["a"],{attrs:{cols:"6"}},[t(y["a"],{attrs:{label:"Runner Token"},on:{input:e.valueChanged},model:{value:e.value.runToken,callback:function(t){e.$set(e.value,"runToken",t)},expression:"value.runToken"}})],1)],1),t(be["a"],[t(me["a"],{attrs:{cols:"6"}},[t(Be["a"],{attrs:{rows:"6",label:"Testcases (as json)",value:e.testCasesString,required:""},on:{input:e.updateTestCases}})],1),t(me["a"],{attrs:{cols:"6"}},[t(y["a"],{attrs:{label:"Main class",required:""},on:{input:e.valueChanged},model:{value:e.value.mainClass,callback:function(t){e.$set(e.value,"mainClass",t)},expression:"value.mainClass"}}),t("br"),t(st["a"],{attrs:{label:"Allow custom test?",items:[!0,!1]},on:{input:e.valueChanged},model:{value:e.value.allowCustomTest,callback:function(t){e.$set(e.value,"allowCustomTest",t)},expression:"value.allowCustomTest"}})],1)],1)],1)],1)},Et=[];const At=["c","cpp","csharp","css","html","java","javascript","julia","kotlin","markdown","pascal","python","r","ruby","rust","scala","sql","typescript","xml"],Rt=()=>({lang:"java",files:[{filename:"Main.java",content:"public class Main { \n \n }"}],mainClass:"Main",runUrl:"",runToken:"",testCases:[],allowCustomTest:!0,referenceUrl:"https://docs.oracle.com/javase/8/docs/api/index.html"});var $t={name:"EditMultiCodingQuestion",props:["value","focused"],created(){this.injectValues()},data:()=>({languages:At}),methods:{injectValues(){const e=Object.keys(this.value);for(let[t,s]of Object.entries(Rt()))e.includes(t)||(this.value[t]=s)},addFile(){this.value.files.push({filename:"",content:""}),this.$emit("input",this.value)},removeFile(e){this.value.files.splice(e,1),this.$emit("input",this.value)},valueChanged(){this.$emit("input",this.value)},updateTestCases(e){try{this.value.testCases=JSON.parse(e),this.$emit("input",this.value)}catch(t){}}},computed:{testCasesString(){return JSON.stringify(this.value.testCases)}}},Dt=$t,jt=(s("c291"),s("6cc5"),Object(x["a"])(Dt,qt,Et,!1,null,"6ddc69ae",null)),Nt=jt.exports,Mt=s("c4e3"),Lt=s.n(Mt);function Ut(e){return{...e,lang:"java",files:[{filename:"Main.java",content:"public class Main { \n \n }"}],mainClass:"Main",runUrl:"",runToken:"",testCases:[],allowCustomTest:!0,referenceUrl:"https://docs.oracle.com/javase/8/docs/api/index.html"}}function It(e,t){const s=[],a=new Lt.a;for(const n of e.files){const e=n.filename,s=t&&t[e]?t[e]:n.content;a.file(e,s)}return Promise.all(s).then(()=>a.generateAsync({type:"blob"})).then(t=>({filename:e.exportConfig.filename,contentType:"blob",content:t}))}var Ft={description:"Multiple files coding exercise with the Monaco Editor",view:St,edit:Nt,initialize:Ut,exportAnswer:It,defaultExtension:".zip"},Pt=s("aac8"),Bt=function(){var e,t,s,n,o,i,c,p,d=this,h=d._self._c;return h("div",{staticClass:"question-container"},[d.sheets?h("div",{staticClass:"question-editor"},[h(u["a"],{staticClass:"question-tabs",model:{value:d.currentTab,callback:function(e){d.currentTab=e},expression:"currentTab"}},[null!==(e=d.question)&&void 0!==e&&e.descriptionAsTab?h(l["a"],[h(r["a"],{attrs:{dense:""}},[d._v("mdi-file-document")]),d._v("  Description ")],1):d._e(),d._l(d.sheets,(function(e){return h(l["a"],{key:e.name,staticClass:"question-tab"},[h(r["a"],{attrs:{dense:""}},[d._v("mdi-table")]),d._v("  "+d._s(e.name)+" ")],1)}))],2),h(Pt["a"],{model:{value:d.currentTab,callback:function(e){d.currentTab=e},expression:"currentTab"}},[null!==(t=d.question)&&void 0!==t&&t.descriptionAsTab?h(Pe["a"],[h("div",{staticClass:"description"},[h("MarkdownDisplay",{staticClass:"question-text",attrs:{source:d.question.description}})],1)]):d._e(),d._l(d.sheets,(function(e){return h(Pe["a"],{key:e.name},[h("div",{staticClass:"spreadsheet-wrapper"},[h("SpreadsheetTable",{attrs:{"max-height":"calc(98vh - 110px)",value:e}})],1)])}))],2)],1):d._e(),h("div",{staticClass:"rhs"},[h("div",{staticClass:"question-instruction"},[null!==(s=d.question)&&void 0!==s&&s.descriptionAsTab?d._e():h("div",{staticClass:"rhs-part"},[h($e["a"],{staticClass:"descr-card"},[h(De["c"],[d._v("Description")]),h(De["b"],[h("MarkdownDisplay",{staticClass:"question-text",attrs:{source:d.question.description}})],1)],1)],1),d.question.tasks&&d.question.tasks.length>0?h("div",{staticClass:"rhs-part"},[h("h3",[d._v("Tasks")]),d._l(d.question.tasks,(function(e,t){return h($e["a"],{key:"task-"+t,staticClass:"task-card"},[h(De["c"],[d._v(d._s("Task "+(t+1))+" "),e.title?h("span",[d._v("-"+d._s(e.title))]):d._e()]),h(De["b"],[h("MarkdownDisplay",{attrs:{source:e.description}}),h(y["a"],{attrs:{label:"Enter a spreadsheet formula for cell "+e.targetCell+" of sheet "+e.targetSheetName},model:{value:d.formulas[t],callback:function(e){d.$set(d.formulas,t,e)},expression:"formulas[index]"}}),d.errors[t]?h(a["a"],{attrs:{type:"error"}},[h("div",{staticClass:"text-h6"},[d._v(" "+d._s(d.errors[t].type)+" ")]),"DIV_BY_ZERO"==d.errors[t].type?h("span",[d._v(" Division by zero occurred. This is not allowed! ")]):h("span",[d._v(" "+d._s(d.errors[t].message)+" ")])]):d._e(),e.copyTo&&e.copyTo.length>0?[h("p",[d._v("This formula will be copied to the following cells")]),h("ul",d._l(e.copyTo,(function(e){return h("li",{key:"copy-to-"+e},[h("code",[d._v(d._s(e))])])})),0)]:d._e()],2)],1)}))],2):d._e(),null!==(n=d.question)&&void 0!==n&&null!==(o=n.answerSpec)&&void 0!==o&&o.entries&&d.question.answerSpec.entries.length>0?h("div",{staticClass:"rhs-part"},[h("h3",[d._v("Answer code")]),null!==(i=d.question)&&void 0!==i&&i.answerSpec?h($e["a"],{staticClass:"answer-card"},[h(De["c"],[d._v("Final Answer")]),h(De["b"],[h("div",[d._v("The final answer is based on the following information:")]),h("ul",d._l(null===(c=d.question)||void 0===c||null===(p=c.answerSpec)||void 0===p?void 0:p.entries,(function(e,t){return h("li",{key:"entry-"+t},["range-values"==e.type?h("span",[d._v(" The "),h("em",[d._v("values")]),d._v(" in range "),h("code",[d._v(d._s(e.source))])]):"range-formulas"==e.type?h("span",[d._v(" The "),h("em",[d._v("formulas")]),d._v(" in range "),h("code",[d._v(d._s(e.source))])]):"range-hash"==e.type?h("span",[d._v(" A "),h("em",[d._v("hash")]),d._v(" computed with the values in range "),h("code",[d._v(d._s(e.source))])]):"formula"==e.type?h("span",[d._v(" The result of the formula "),h("code",[d._v(d._s(e.formula))])]):d._e()])})),0),h("br"),h("AnswerCodeDisplay",{attrs:{answerCode:d.answerCode}})],1)],1):d._e()],1):d._e()])])])},Vt=[],Jt=s("cc6f"),zt=s("cc20"),Wt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"spreadsheet-wrapper"},[e.editable?t(y["a"],{ref:"editfield",staticClass:"edit-field",attrs:{disabled:e.currentLocked,outlined:"",dense:"",value:e.currentValue},on:{input:e.updateValue,keydown:e.keydown},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[t(zt["a"],{staticClass:"address-chip",attrs:{label:"",disabled:"",small:""}},[e._v(e._s(e.currentAddress))])]},proxy:!0}],null,!1,1811444342)}):e._e(),t("div",{style:e.tableStyle},[t("table",{staticClass:"spreadsheet"},[t("thead",[t("tr",[e._m(0),e._l(e.value.dimensions.width,(function(s){return t("th",{key:"col-"+s,staticClass:"column-label",attrs:{scope:"col"}},[e._v(e._s(e.getColumnLabel(s)))])}))],2)]),t("tbody",e._l(e.value.dimensions.height,(function(s){return t("tr",{key:"row-"+s},[t("th",{attrs:{scope:"row"}},[e._v(e._s(s))]),e._l(e.value.dimensions.width,(function(a){return t("td",{key:"cell-"+s+"-"+a,class:e.getStyleClasses(s-1,a-1),on:{click:function(t){return e.setCurrent(s-1,a-1)}}},[e.value.values[s-1]?[e._v(" "+e._s(e.value.values[s-1][a-1])+" ")]:e._e()],2)}))],2)})),0)])])],1)},Xt=[function(){var e=this,t=e._self._c;return t("th",{staticClass:"spreadsheet-triangle-cell",attrs:{scope:"col"}},[t("div",{staticClass:"spreadsheet-triangle"})])}],Yt={name:"SpreadsheetTable",props:["value","editable","locked","max-height"],data:()=>({currentCell:null}),methods:{keydown(e){if(this.currentCell&&e.ctrlKey){const t=this.currentCell;"ArrowLeft"==e.key?t.col>=1&&t.col--:"ArrowRight"==e.key?t.col<this.value.dimensions.width-1&&t.col++:"ArrowUp"==e.key?t.row>=1&&t.row--:"ArrowDown"==e.key?t.row<this.value.dimensions.height-1&&t.row++:"Delete"!=e.key&&"BackSpace"!=e.key||this.updateValue("")}},setCurrent(e,t){this.editable&&(this.currentCell={row:e,col:t},this.$nextTick(()=>this.$refs.editfield.focus()))},getColumnLabel(e){let t="";while(e>=0){const s=e%26+96;t=String.fromCharCode(s).toUpperCase()+t,e=Math.floor(e/26)-1}return t},determineTypeClass(e){return null===e||void 0===e?{"value-blank":!0}:"number"===typeof e?{"value-number":!0}:"boolean"===typeof e?{"value-boolean":!0}:"string"===typeof e&&e.startsWith("=")?{formula:!0}:{"value-text":!0}},getStyleClasses(e,t){const s=this.determineTypeClass(this.value.values[e][t]);return this.currentCell&&this.currentCell.row==e&&this.currentCell.col==t&&(s["selected"]=!0),s},updateValue(e){if(!this.currentCell)return;const{row:t,col:s}=this.currentCell;let a=e.trim();a.length>0&&!isNaN(a)?a=parseFloat(e):"true"!=a&&"false"!=a||(a="true"==a),this.value.values[t][s]=a,this.$emit("input",this.value)}},watch:{value(e){if(this.currentCell&&e&&e.dimensions){const t=this.currentCell,s=e.dimensions;(t.row>=s.height||t.col>=s.width)&&(this.currentCell=null)}}},computed:{currentLocked(){return!this.currentCell},currentAddress(){return null!=this.currentCell?this.getColumnLabel(this.currentCell.col+1)+(this.currentCell.row+1):""},currentValue(){if(!this.currentCell)return"";const e=this.value.values;return e[this.currentCell.row][this.currentCell.col]},tableStyle(){return this.maxHeight?(console.log("height!"),{"max-height":this.maxHeight,"overflow-y":"scroll"}):{}}}},Ht=Yt,Qt=(s("f8ac"),Object(x["a"])(Ht,Wt,Xt,!1,null,"2f6ca3ab",null)),Gt=Qt.exports;const Kt="#NO_VALUE!",Zt="#NO_FORMULA!",es={decimals:2,iterations:1,hashLength:8,truncate:!1,truncateLength:1,case:!1,trim:!0};function ts(e,t){e||(this.answerCode="");const s=[];for(const a of e.entries){if("formula"==a.type){const e=t.calculateFormula(a.formula,0),n=ss(e,a);s.push(n);continue}const n=as(a.source,t);if("range-formulas"==a.type){const a=os(n,t),r=is(a,e.entrySeparator);s.push(r)}else if("range-values"==a.type){const r=rs(n,t),o=is(r,e.valueSeparator,e=>ss(e,a));s.push(o)}else if("range-hash"==a.type){const r=rs(n,t),o=is(r,e.hashSeparator,e=>ss(e,a));let i=f(o);for(let e=1;e<a.iterations;e++)i=f(i+"||"+o);a.hashLength&&(i=i.substring(0,a.hashLength)),s.push(i)}}return s.join(e.entrySeparator)}function ss(e,t){let s=e;if(!s||0!==s&&Number.isNaN(s)||!t.decimals&&0!==t.decimals||(s=(+s).toFixed(t.decimals)),s=""+s,t.trim&&(s=s.trim()),t.case&&("upper"==t.case?s=s.toLowerCase():"lower"==t.case&&(s=s.toUpperCase())),t.truncate)if("start"==t.truncate)s=s.substring(0,t.truncateLength);else if("end"==t.truncate){const e=Math.max(0,s.length-t.truncateLength);s=s.substring(e,t.truncateLength)}return s}function as(e,t){if(e.search(":")>=0)return t.simpleCellRangeFromString(e,-1);const s=t.simpleCellAddressFromString(e,-1);return{start:s,end:s}}function ns(e,t){for(let s=0;s<e.length;s++){const a=e[s];for(let e=0;e<a.length;e++)void 0!==a[e]&&""!=a[e]||(a[e]=t)}}function rs(e,t){const s=t.getRangeValues(e);return ns(s,Kt),s}function os(e,t){const s=t.getRangeFormulas(e);return ns(s,Zt),s}function is(e,t,s=(e=>e)){return e.map(e=>e.map(s).join(t)).join(t)}var ls={name:"HyperFormulaQuestion",props:["question","focused","inputAnswer"],components:{MarkdownDisplay:v["a"],AnswerCodeDisplay:S,SpreadsheetTable:Gt},created(){this.updateWorkbook()},methods:{updateWorkbook(){const e=this.question;if(!e)return;const t={licenseKey:"gpl-v3"};if(this.workbook=Jt["a"].buildFromSheets(e.sheets,t,e.namedRanges),this.inputAnswer&&this.inputAnswer.formulas)this.formulas=this.inputAnswer.formulas;else{this.formulas=[];for(const t of e.tasks)this.formulas.push(t.defaultFormula)}this.updateSheets()},updateSheets(){if(!this.workbook)return[];const e=[],t=this.workbook;for(let s=0;s<t.countSheets();s++){const a={name:t.getSheetName(s),dimensions:t.getSheetDimensions(s),values:t.getSheetValues(s)};e.push(a)}this.sheets=e},updateAnswerCode(){var e;const t=null===(e=this.question)||void 0===e?void 0:e.answerSpec;this.answerCode=ts(t,this.workbook)}},computed:{fullAnswer(){return{shortAnswer:this.answerCode,formulas:this.formulas}}},watch:{question(){this.updateWorkbook()},fullAnswer(e){this.$emit("input",e)},formulas(e){for(let t=0;t<this.question.tasks.length;t++){const s=this.question.tasks[t],a=e[t],n=this.workbook.getSheetId(s.targetSheetName),r=this.workbook.simpleCellAddressFromString(s.targetCell,n);this.workbook.setCellContents(r,[[a]]);const o=this.workbook.getCellValue(r);if(o&&o.value&&o.type?this.errors[t]=o:this.errors[t]=null,s.copyTo)for(const e of s.copyTo){let t;if(-1!=e.search(":"))t=this.workbook.simpleCellRangeFromString(e,n);else{const s=this.workbook.simpleCellAddressFromString(e,n);t={start:s,end:s}}for(let e=t.start.row;e<=t.end.row;e++)for(let s=t.start.col;s<=t.end.col;s++){const a={row:e,col:s,sheet:t.start.sheet};this.workbook.copy({start:r,end:r}),this.workbook.paste(a)}}}this.updateSheets(),this.updateAnswerCode()}},data:()=>({currentTab:0,workbook:null,formulas:[],errors:[],sheets:[],answerCode:""})},us=ls,cs=(s("e0f0"),s("db82"),Object(x["a"])(us,Bt,Vt,!1,null,"193f6c9e",null)),ps=cs.exports,ds=function(){var e=this,t=e._self._c;return t("div",[t($e["a"],{staticClass:"config-card"},[t(De["c"],[e._v(" Question configuration ")]),t(De["b"],[t(he["a"],{attrs:{label:"Show question description as spreadsheet tab"},model:{value:e.value.descriptionAsTab,callback:function(t){e.$set(e.value,"descriptionAsTab",t)},expression:"value.descriptionAsTab"}})],1)],1),t($e["a"],{staticClass:"data-card"},[t(De["c"],[e._v(" Spreadsheet Data ")]),t(p["a"],{staticClass:"elevation-0"},[t(n["a"],{attrs:{color:"primary"},on:{click:e.addSheet}},[t(r["a"],[e._v("mdi-plus")]),e._v(" Sheet")],1),e._v("  "),t(n["a"],{attrs:{color:"primary"},on:{click:e.importSheet}},[t(r["a"],[e._v("mdi-import")]),e._v(" File")],1)],1),t(De["b"],[e.value.sheets?[t(u["a"],{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},e._l(e.wrappedSheets,(function(s){return t(l["a"],{key:"tab-"+s.name},[t(r["a"],{attrs:{dense:""}},[e._v("mdi-table")]),e._v("  "+e._s(s.name)+" ")],1)})),1),t(Pt["a"],{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},e._l(e.wrappedSheets,(function(s){return t(Pe["a"],{key:"content-"+s.name},[t("SpreadsheetTable",{attrs:{"max-height":"35vh",value:s,editable:"true"},on:{input:e.updateSheet}}),t(p["a"],{staticClass:"elevation-0"},[t(n["a"],{attrs:{color:"primary"},on:{click:t=>e.addRow(s)}},[t(r["a"],[e._v("mdi-plus")]),e._v(" Row")],1),t(n["a"],{attrs:{color:"primary"},on:{click:t=>e.addColumn(s)}},[t(r["a"],[e._v("mdi-plus")]),e._v(" Column")],1),e._v("  "),t(n["a"],{attrs:{color:"error"},on:{click:t=>e.removeRow(s)}},[t(r["a"],[e._v("mdi-delete")]),e._v(" Row")],1),t(n["a"],{attrs:{color:"error"},on:{click:t=>e.removeColumn(s)}},[t(r["a"],[e._v("mdi-delete")]),e._v(" Column")],1),e._v("  "),t(n["a"],{attrs:{color:"primary"},on:{click:t=>e.moveSheet(s,!0)}},[t(r["a"],[e._v("mdi-content-copy")]),e._v(" Sheet")],1),t(n["a"],{attrs:{color:"warning"},on:{click:t=>e.moveSheet(s)}},[t(r["a"],[e._v("mdi-rename-box")]),e._v(" Sheet")],1),t(n["a"],{attrs:{color:"error",disabled:e.wrappedSheets.length<=1},on:{click:t=>e.removeSheet(s)}},[t(r["a"],[e._v("mdi-delete")]),e._v(" Sheet")],1)],1)],1)})),1)]:e._e()],2)],1),t("EditTasks",{staticClass:"tasks-card",attrs:{sheetnames:e.sheetnames},model:{value:e.value.tasks,callback:function(t){e.$set(e.value,"tasks",t)},expression:"value.tasks"}}),t("EditAnswerSpec",{staticClass:"answer-card",attrs:{currentSheet:e.currentSheetName},model:{value:e.value.answerSpec,callback:function(t){e.$set(e.value,"answerSpec",t)},expression:"value.answerSpec"}}),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".xlsx,.xls,.csv"},on:{change:e.importChosen}})],1)},hs=[],ms=function(){var e=this,t=e._self._c;return t($e["a"],[t(De["c"],[e._v(" Tasks ")]),t(p["a"],{staticClass:"elevation-0"},[t(n["a"],{attrs:{color:"primary"},on:{click:e.addTask}},[t(r["a"],[e._v("mdi-plus")]),e._v(" Task")],1)],1),e.value?t(De["b"],{staticClass:"d-flex"},e._l(e.value,(function(s,a){return t($e["a"],{key:"task-"+a,staticClass:"task-card"},[t(De["c"],[e._v("Task "+e._s(a+1)+" "),t(i["a"]),t(n["a"],{attrs:{color:"error",text:""},on:{click:function(t){return e.deleteTask(a)}}},[t(r["a"],[e._v("mdi-delete")]),e._v(" Task")],1)],1),t(De["b"],[t(y["a"],{attrs:{outlined:"",label:"Title of the task"},model:{value:s.title,callback:function(t){e.$set(s,"title",t)},expression:"task.title"}}),t(Be["a"],{attrs:{outlined:"",label:"Description of task (markdown is supported)"},model:{value:s.description,callback:function(t){e.$set(s,"description",t)},expression:"task.description"}}),t(st["a"],{attrs:{outlined:"",items:e.sheetnames,label:"Target sheet"},model:{value:s.targetSheetName,callback:function(t){e.$set(s,"targetSheetName",t)},expression:"task.targetSheetName"}}),t(y["a"],{attrs:{outlined:"",label:"Target cell"},model:{value:s.targetCell,callback:function(t){e.$set(s,"targetCell",t)},expression:"task.targetCell"}}),t(y["a"],{attrs:{outlined:"",label:"Default formula provided to student"},model:{value:s.defaultFormula,callback:function(t){e.$set(s,"defaultFormula",t)},expression:"task.defaultFormula"}}),s.copyTo&&s.copyTo.length>0?t("h4",[e._v("Formula will be copied to the following cells/ranges")]):t("h4",[e._v("Formula not copied to other cells/ranges")]),t("br"),e._l(s.copyTo,(function(n,o){return t(y["a"],{key:"copyTo"+o,attrs:{outlined:"",label:"Cell / Range"},scopedSlots:e._u([{key:"append",fn:function(){return[t(r["a"],{attrs:{color:"error"},on:{click:function(t){return e.deleteCopyTo(a,o)}}},[e._v("mdi-delete")])]},proxy:!0}],null,!0),model:{value:s.copyTo[o],callback:function(t){e.$set(s.copyTo,o,t)},expression:"task.copyTo[copyIndex]"}})}))],2),t(De["a"],[t(n["a"],{attrs:{color:"primary",text:""},on:{click:function(t){return e.addCopyTo(s)}}},[t(r["a"],[e._v("mdi-plus")]),e._v(" Copy To")],1)],1)],1)})),1):e._e()],1)},fs=[],vs={name:"EditAnswerSpec",props:["value","sheetnames"],methods:{addTask(){const e=this.value;e.push({title:"Task "+(e.length+1),description:"Write a formula for cell `A1` that does something useful",targetSheetName:this.sheetnames[this.currentTab],targetCell:"A1",defaultFormula:"=0",copyTo:[]})},deleteTask(e){this.value&&this.value.splice(e,1)},addCopyTo(e){e&&e.copyTo&&e.copyTo.push("A1")},deleteCopyTo(e,t){this.value[e].copyTo.splice(t,1)}},watch:{value(){this.$emit("input",this.value)}}},bs=vs,ys=(s("337a"),Object(x["a"])(bs,ms,fs,!1,null,"30c0dfee",null)),gs=ys.exports,_s=function(){var e=this,t=e._self._c;return t($e["a"],[t(De["c"],[e._v(" Answer Definition ")]),t(De["b"],[t("h4",[e._v("Answer Elements")])]),t(p["a"],{staticClass:"elevation-0"},[t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.addAnswerElement()}}},[t(r["a"],[e._v("mdi-plus")]),e._v(" Element")],1)],1),t(De["b"],{staticClass:"d-flex"},e._l(e.value.entries,(function(s,a){return t($e["a"],{key:"entry-"+a,staticClass:"answer-entry-card"},[t(De["c"],[e._v(" Element "+e._s(a+1)+" "),t(i["a"]),t(n["a"],{attrs:{color:"error",text:""},on:{click:function(t){return e.deleteAnswerElement(a)}}},[t(r["a"],[e._v("mdi-delete")]),e._v(" Element")],1)],1),t(De["b"],[t("h4",[e._v("Type of answer element")]),t(Le["a"],{attrs:{row:"",label:""},model:{value:s.type,callback:function(t){e.$set(s,"type",t)},expression:"entry.type"}},[t(Me["a"],{attrs:{label:"Cell values",value:"range-values"}}),t(Me["a"],{attrs:{label:"Cell formulas",value:"range-formulas"}}),t(Me["a"],{attrs:{label:"Hash of values",value:"range-hash"}}),t(Me["a"],{attrs:{label:"Formula",value:"formula"}})],1),t("h4",[e._v("Answer element details")]),t("br"),"formula"!=s.type?t(y["a"],{attrs:{outlined:"",label:"Cell/Range to extract"},model:{value:s.source,callback:function(t){e.$set(s,"source",t)},expression:"entry.source"}}):e._e(),"formula"==s.type?t(y["a"],{attrs:{outlined:"",label:"Formula to compute"},model:{value:s.formula,callback:function(t){e.$set(s,"formula",t)},expression:"entry.formula"}}):e._e(),"range-formulas"!=s.type?t(y["a"],{attrs:{outlined:"",label:"Number of decimals for numeric values",type:"number",min:"0",max:"8"},model:{value:s.decimals,callback:function(t){e.$set(s,"decimals",t)},expression:"entry.decimals"}}):e._e(),t(st["a"],{attrs:{outlined:"",items:e.caseOptions,label:"Convert case of answer code?"},model:{value:s.case,callback:function(t){e.$set(s,"case",t)},expression:"entry.case"}}),"range-hash"==s.type?[t("h4",[e._v("Hash function details")]),t("br"),t(y["a"],{attrs:{outlined:"",label:"Number of hash iterations",type:"number",min:"1",max:"50"},model:{value:s.iterations,callback:function(t){e.$set(s,"iterations",t)},expression:"entry.iterations"}}),t(y["a"],{attrs:{outlined:"",label:"Length of final answer code",type:"number",min:"1",max:"32"},model:{value:s.hashLength,callback:function(t){e.$set(s,"hashLength",t)},expression:"entry.hashLength"}})]:e._e(),"range-formulas"!=s.type?[t("h4",[e._v("String value details")]),t("br"),t(st["a"],{attrs:{outlined:"",items:e.truncateOptions,label:"Truncate long values?"},model:{value:s.truncate,callback:function(t){e.$set(s,"truncate",t)},expression:"entry.truncate"}}),s.truncate?t(y["a"],{attrs:{outlined:"",label:"Truncate to number of characters",type:"number",min:"1",max:"50"},model:{value:s.truncateLength,callback:function(t){e.$set(s,"truncateLength",t)},expression:"entry.truncateLength"}}):e._e(),t(he["a"],{attrs:{label:"Remove leading and trailing whitespace"},model:{value:s.trim,callback:function(t){e.$set(s,"trim",t)},expression:"entry.trim"}})]:e._e()],2)],1)})),1),t(De["b"],[t("div",{staticClass:"d-flex flex-column"},[t("h4",[e._v("Separators")]),e._v("  "),t(y["a"],{staticClass:"separator-field",attrs:{outlined:"",label:"Element separator"},model:{value:e.value.entrySeparator,callback:function(t){e.$set(e.value,"entrySeparator",t)},expression:"value.entrySeparator"}}),e._v("  "),t(y["a"],{staticClass:"separator-field",attrs:{outlined:"",label:"Value separator"},model:{value:e.value.valueSeparator,callback:function(t){e.$set(e.value,"valueSeparator",t)},expression:"value.valueSeparator"}}),e._v("  "),t(y["a"],{staticClass:"separator-field",attrs:{outlined:"",label:"Hash separator"},model:{value:e.value.hashSeparator,callback:function(t){e.$set(e.value,"hashSeparator",t)},expression:"value.hashSeparator"}})],1)])],1)},ks=[],ws={name:"EditAnswerSpec",props:["value","currentSheet"],data:()=>({truncateOptions:[{text:"Retain full values",value:!1},{text:"Truncate from start",value:"start"},{text:"Truncate from end",value:"end"}],caseOptions:[{text:"Retain case",value:!1},{text:"Convert to upper-case",value:"upper"},{text:"Convert to lower-case",value:"lower"}]}),methods:{valueChanged(){this.$emit("input",this.value)},addAnswerElement(){var e;this.value&&null!==(e=this.value)&&void 0!==e&&e.entries&&this.value.entries.push({type:"range-values",source:this.currentSheet+"!A1",formula:"="+this.currentSheet+"!A1",decimals:2,iterations:1,hashLength:8,truncate:!1,truncateLength:1,case:!1,trim:!0})},deleteAnswerElement(e){this.value.entries.splice(e,1)}},watch:{value(){this.$emit("input",this.value)}}},Cs=ws,xs=(s("7161"),Object(x["a"])(Cs,_s,ks,!1,null,"88a2ca0e",null)),Ts=xs.exports,Ss=s("e8ae"),Os={name:"EditHyperFormulaQuestion",props:["value","focused"],components:{SpreadsheetTable:Gt,EditAnswerSpec:Ts,EditTasks:gs},data:()=>({currentTab:0,truncateOptions:[{text:"Retain full values",value:!1},{text:"Truncate from start",value:"start"},{text:"Truncate from end",value:"end"}],caseOptions:[{text:"Retain case",value:!1},{text:"Convert to upper-case",value:"upper"},{text:"Convert to lower-case",value:"lower"}]}),methods:{valueChanged(){this.$emit("input",this.value)},importSheet(){this.$refs.fileInput.click()},importChosen(e){if(e.target.files[0]){const t=e.target.files[0],s=new FileReader;s.onload=e=>{try{const t=new Ss["Workbook"],s=e.target.result,a={};t.xlsx.load(s).then(e=>{for(const t of e.worksheets){const e=t.name,s=[];console.log(e),t.eachRow(e=>{e.eachCell(e=>{const t=e.row-1,a=e.col-1;let n=e.value;e.formula&&(n="="+e.formula),s[t]||(s[t]=[]),s[t][a]=n})}),a[e]=s}this.$set(this.value,"sheets",a)})}catch(t){console.log(t)}},s.readAsArrayBuffer(t)}},addSheet(){const e=prompt("Enter a name for the new sheet");e&&e.trim()&&this.$set(this.value.sheets,e.trim(),[[""]])},addColumn(e){for(const t of e.values)t.push("")},addRow(e){const t=Array(e.dimensions.width).fill("");e.values.push(t)},removeColumn(e){for(const t of e.values)t.length>0&&t.splice(t.length-1,1)},removeRow(e){e.values.length>0&&e.values.splice(e.values.length-1,1)},moveSheet(e,t){const s=prompt(t?"Enter a name for the copy":"Enter a new name for the sheet");if(s&&s.trim()){const a=e.name,n=s.trim();if(t){const t=[];for(const s of e.values)t.push([...s]);e.values=t}else{this.removeSheet(e);for(const e of this.value.tasks)e.targetSheetName==a&&(e.targetSheetName=n)}this.$set(this.value.sheets,s.trim(),e.values)}},removeSheet(e){this.$delete(this.value.sheets,e.name)},updateSheet(e){this.$set(this.value.sheets[e.name],"values",e.values),this.$emit("input",this.value)},addTask(){const e=this.value.tasks;e.push({title:"Task "+(e.length+1),description:"Write a formula for cell `A1` that does something useful",targetSheetName:this.sheetnames[this.currentTab],targetCell:"A1",defaultFormula:"",copyTo:[]})},deleteTask(e){this.value&&this.value.tasks&&this.value.tasks.splice(e,1)},addCopyTo(e){e&&e.copyTo&&e.copyTo.push("A1")},addAnswerElement(){var e,t;this.value&&null!==(e=this.value)&&void 0!==e&&null!==(t=e.answerSpec)&&void 0!==t&&t.entries&&this.value.answerSpec.entries.push({type:"cell-value",source:this.sheetnames[this.currentTab]+"!A1",formula:"="+this.sheetnames[this.currentTab]+"!A1",decimals:2,iterations:1,truncate:!1,truncateLength:1,case:!1,trim:!0})},deleteAnswerElement(e){this.value.answerSpec.entries.splice(e,1)}},computed:{wrappedSheets(){const e=[];if(this.value&&this.value.sheets)for(const[t,s]of Object.entries(this.value.sheets))e.push({name:t,dimensions:{height:s.length,width:s[0]?s[0].length:0},values:s});return e},sheetnames(){return this.value&&this.value.sheets?[...Object.keys(this.value.sheets)]:[]},currentSheetName(){return this.sheetnames[this.currentTab]}}},qs=Os,Es=(s("4ea7"),Object(x["a"])(qs,ds,hs,!1,null,"516d2065",null)),As=Es.exports;function Rs(e){return{...e,sheets:{Sales:[["CustomerID","Product Name","Quantity","Price","Revenue"],[51236,"Soap",12,1.5,""],[73452,"Onions",8,.25,""],[25623,"Iceberg Lettuce",2,1.25,""],[92834,"Coffee",12,1.99,""],["","","","",""],["Average Revenue","","",""]]},namedRanges:[],tasks:[{title:"Compute revenue",description:"Write a formula for cell `E2` that computes the revenue as the product of price and quantity.",targetSheetName:"Sales",targetCell:"E2",defaultFormula:"",copyTo:["E3:E5"]},{title:"Average revenue",description:"Write a formula for cell `B7` that computes the average revenue of the products.",targetSheetName:"Sales",targetCell:"B7",defaultFormula:"",copyTo:[]}],answerSpec:{entrySeparator:" :: ",valueSeparator:"-",hashSeparator:":|:",entries:[{...es,type:"range-hash",source:"Sales!E2:E5",decimals:2,truncate:!1,iterations:1},{...es,type:"range-values",source:"Sales!B7",decimals:2,truncate:!1},{...es,type:"range-formulas",source:"Sales!E2"},{...es,type:"range-formulas",source:"Sales!B7"}]}}}function $s(e,t){return new Promise((s,a)=>{try{const a=e.exportConfig;"file"==a.type&&s({type:"file",filename:a.filename,contentType:"text",content:JSON.stringify(t)})}catch(n){a(n)}})}var Ds={description:"Write spreadsheet formulas using the HyperFormula software",view:ps,edit:As,initialize:Rs,exportAnswer:$s,defaultExtension:".json"};const js={blockly:qe,coding:ht,multicoding:Ft,hyperformula:Ds};function Ns(e,t,s){return new Promise((a,n)=>{try{const r=e.exportConfig;if("code"==r.type){const e=t.shortAnswer;a({type:"code",content:e})}else if("json"==r.type){const e=JSON.stringify(t);a({type:"file",filename:r.filename,contentType:"text",content:e})}else"file"==r.type&&js[e.type].exportAnswer(e,t,s).then(e=>a(e)).catch(e=>n(e))}catch(r){n(r)}})}function Ms(e){return e.exportConfig&&"json"==e.exportConfig?".answer.json":js[e.type].defaultExtension}t["a"]=js},"29b0":function(e,t,s){"use strict";s("47a1")},"2f4a":function(e,t,s){"use strict";s("3067")},3067:function(e,t,s){},"337a":function(e,t,s){"use strict";s("516f")},"3c27":function(e,t,s){"use strict";s("f794")},"3c2e":function(e,t,s){"use strict";function a(e){const t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t);const s=document.createRange();s.selectNode(t);const a=window.getSelection();a.removeAllRanges(),a.addRange(s);try{document.execCommand("copy")}catch(n){console.log("Failed to copy the contents to the clipboard",n)}a.removeAllRanges(),document.body.removeChild(t)}function n(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{const s=document.createElement("textarea");s.value=e,s.style.display="none",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}catch(t){console.log("Failed to copy the contents to the clipboard",t)}document.body.removeChild(s)}}s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return n}))},"402c":function(e,t,s){"use strict";var a=s("2b0e"),n=s("f309");a["a"].use(n["a"]),t["a"]=new n["a"]({})},4360:function(e,t,s){"use strict";s("14d9");var a=s("2b0e"),n=s("2f62");const r=new BroadcastChannel("singleton-focus"),o=e=>{console.log("Activating singleton plugin"),r.onmessage=t=>{var s;const a=t.data;"lostFocus"==a.type&&null!==(s=e.state.question)&&void 0!==s&&s.uuid&&e.state.question.uuid==a.uuid&&(e.commit("lostFocus"),console.log("Focus lost"))},e.subscribe((e,t)=>{"setQuestion"==e.type&&t.question.uuid&&r.postMessage({type:"lostFocus",uuid:t.question.uuid})})};var i=o;function l(e){return"answer_"+e.question.uuid}function u(e){const t=l(e),s=JSON.stringify(e.answer);window.localStorage[t]=s}function c(e){const t=l(e),s=window.localStorage[t];return s?JSON.parse(s):null}const p=e=>{e.subscribe((t,s)=>{if("setQuestion"==t.type&&s.question.uuid){const t=c(s);t&&e.commit("setAnswer",t)}"setAnswer"==t.type&&s.question.uuid&&u(s)})};var d=p;const h={singleton:i,persistence:d};a["a"].use(n["a"]);const m={state:{question:null,loadError:null,hasFocus:!0,answer:null},mutations:{setQuestion(e,t){e.question=t},setLoadError(e,t){e.loadError=t},lostFocus(e){e.hasFocus=!1},setAnswer(e,t){e.answer=t}},actions:{},modules:{},getters:{questionName(e){return e.question?e.question.name:"No Question Data"},questionType(e){return e.question?e.question.type:null}}};function f(e=["singleton","persistence"]){const t=[];for(const s of e){const e=h[s];if(!e)throw"Plugin key '"+s+"' is unknown. Can not create VueX store.";t.push(e)}return new n["a"].Store({...m,plugins:t})}t["a"]=f},"47a1":function(e,t,s){},"4acc":function(e,t,s){"use strict";s("2428")},"4ea7":function(e,t,s){"use strict";s("fbfc")},"4f0f":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{ref:"renderDiv",staticClass:"adjust-md",domProps:{innerHTML:e._s(e.rendered)}})},n=[],r=(s("5b81"),s("c197")),o=s.n(r),i=(s("a878"),s("997e"),s("9d22"),s("d8d9"),s("17ca"),s("f14e"),s("8fd1"),s("2a83"),s("d4cd")),l=s.n(i),u=(s("be0f"),s("2029"),s("dfc9"));const c={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]},p=l()({highlight(e,t){if(t){const a=t.replaceAll("{","").replaceAll("}","");if(a in o.a.languages)try{return'<pre class="language-'+a+'"><code>'+o.a.highlight(e,o.a.languages[a],a)+"</code></pre>"}catch(s){}}return'<pre class="language-none"><code>'+p.utils.escapeHtml(e)+"</code></pre>"}});var d=p.renderer.rules.link_open||function(e,t,s,a,n){return n.renderToken(e,t,s)};p.renderer.rules.link_open=function(e,t,s,a,n){var r=e[t].attrIndex("target");return r<0?e[t].attrPush(["target","_blank"]):e[t].attrs[r][1]="_blank",d(e,t,s,a,n)};var h={name:"MarkdownDisplay",props:["source"],mounted(){this.update()},data:()=>({}),methods:{update(){const e=this.$refs.renderDiv;Object(u["a"])(e,c),o.a.highlightAll()}},computed:{rendered(){return p.render(this.source)}},watch:{source(){this.$nextTick(this.update)}}},m=h,f=(s("3c27"),s("2877")),v=Object(f["a"])(m,a,n,!1,null,null,null);t["a"]=v.exports},"516f":function(e,t,s){},5189:function(e,t,s){},"51d3":function(e,t,s){},"5aea":function(e,t,s){},"5cc2":function(e,t,s){},"5e52":function(e,t,s){},"627b":function(e,t,s){},"67f2":function(e,t,s){},"6cc5":function(e,t,s){"use strict";s("51d3")},"70f0":function(e,t,s){},7161:function(e,t,s){"use strict";s("70f0")},"769e":function(e,t,s){},7870:function(e,t,s){"use strict";s("d2c6")},"7c15":function(e,t,s){},"84a8":function(e,t,s){"use strict";var a=s("0798"),n=s("8336"),r=s("b0af"),o=s("99d9"),i=s("169a"),l=s("ce7e"),u=s("2fa4"),c=function(){var e=this,t=e._self._c;return t(i["a"],{attrs:{width:e.width},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t(r["a"],[t(o["c"],{staticClass:"headline",attrs:{"primary-title":""}},[e._v(" "+e._s(e.title)+" ")]),t(o["b"],[t(a["a"],{attrs:{type:e.type}},[t("MarkdownDisplay",{attrs:{source:e.text}})],1),t("div",[e._v(" Are you sure you want to continue? ")])],1),t(l["a"]),t(o["a"],[t(u["a"]),e.confirm?t(n["a"],{attrs:{color:"primary"},on:{click:function(t){return e.yes()}}},[e._v("Yes")]):e._e(),e.buttons?e._l(e.buttons,(function(s,a){return t(n["a"],{key:a,attrs:{color:s.color},on:{click:function(t){return e.yes(a)}}},[e._v(e._s(s.label))])})):e._e(),t(n["a"],{attrs:{color:"secondary"},on:{click:function(t){return e.no()}}},[e._v("Cancel")])],2)],1)],1)},p=[],d=s("4f0f"),h={name:"ConfirmDialog",components:{MarkdownDisplay:d["a"]},props:["width","title","type","text","confirm","buttons"],methods:{show(){this.visible=!0},yes(e){this.visible=!1,e||0===e?this.buttons[e].action():this.confirm()},no(){this.visible=!1}},data:()=>({visible:!1})},m=h,f=s("2877"),v=Object(f["a"])(m,c,p,!1,null,null,null);t["a"]=v.exports},8807:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return u}));var a=s("e762"),n=s("acff");const r=new TextEncoder,o=new TextDecoder;function i(e){const t=a["a"].toUint8Array(e),s=n["a"].inflate(t),r=o.decode(s),i=JSON.parse(r);return{data:i.payload,validated:!1}}function l(e){const t={payload:e},s=JSON.stringify(t),o=r.encode(s),i=n["a"].deflate(o),l=a["a"].fromUint8Array(i,!0);return l}function u(e,t="setQuestion",s="setLoadError"){const n=()=>{const n=window.location.hash.substring(1);if(n.length>0)try{let s;try{s=i(n)}catch(r){console.log("Error while decoding question data",r),console.log("Attempting a fallback to direct decoding of the hash");const e=a["a"].decode(n);s={data:JSON.parse(e),validated:!1}}const o=s.data;e.commit(t,o),document.title=o.name}catch(o){console.log(o),e.commit(s,o)}};window.addEventListener("hashchange",n),n()}},"88d8":function(e,t,s){},"88df":function(e,t,s){},"8e31":function(e,t,s){},9251:function(e,t,s){"use strict";s("5189")},9416:function(e,t,s){"use strict";s("c1c7")},"98fb":function(e,t,s){},a508:function(e,t,s){"use strict";s("67f2")},a925:function(e,t,s){"use strict";s("88d8")},ad93:function(e,t,s){"use strict";s("769e")},b495:function(e,t,s){"use strict";s("7c15")},c1c7:function(e,t,s){},c291:function(e,t,s){"use strict";s("88df")},c922:function(e,t,s){"use strict";s("8e31")},d2c6:function(e,t,s){},db82:function(e,t,s){"use strict";s("5cc2")},e0f0:function(e,t,s){"use strict";s("98fb")},eb9e:function(e,t,s){"use strict";s("5e52")},f15c:function(e,t,s){},f794:function(e,t,s){},f8ac:function(e,t,s){"use strict";s("5aea")},fbfc:function(e,t,s){}}]);
//# sourceMappingURL=chunk-common.9b4a9d02.js.map